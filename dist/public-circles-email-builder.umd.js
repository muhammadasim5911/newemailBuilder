(function(J,j){typeof exports=="object"&&typeof module<"u"?j(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],j):(J=typeof globalThis<"u"?globalThis:J||self,j(J.PublicCirclesEmailBuilder={},J.React))})(this,function(J,j){"use strict";var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rt={exports:{}},Me={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt;function bn(){if(qt)return Me;qt=1;var t=j,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(l,d,u){var f,g={},h=null,p=null;u!==void 0&&(h=""+u),d.key!==void 0&&(h=""+d.key),d.ref!==void 0&&(p=d.ref);for(f in d)n.call(d,f)&&!o.hasOwnProperty(f)&&(g[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:l,key:h,ref:p,props:g,_owner:s.current}}return Me.Fragment=r,Me.jsx=c,Me.jsxs=c,Me}var Le={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt;function xn(){return Kt||(Kt=1,process.env.NODE_ENV!=="production"&&function(){var t=j,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),x=Symbol.iterator,v="@@iterator";function O(a){if(a===null||typeof a!="object")return null;var m=x&&a[x]||a[v];return typeof m=="function"?m:null}var C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function D(a){{for(var m=arguments.length,E=new Array(m>1?m-1:0),N=1;N<m;N++)E[N-1]=arguments[N];k("error",a,E)}}function k(a,m,E){{var N=C.ReactDebugCurrentFrame,z=N.getStackAddendum();z!==""&&(m+="%s",E=E.concat([z]));var X=E.map(function(W){return String(W)});X.unshift("Warning: "+m),Function.prototype.apply.call(console[a],console,X)}}var H=!1,b=!1,B=!1,Y=!1,ne=!1,ve;ve=Symbol.for("react.module.reference");function Te(a){return!!(typeof a=="string"||typeof a=="function"||a===n||a===o||ne||a===s||a===u||a===f||Y||a===p||H||b||B||typeof a=="object"&&a!==null&&(a.$$typeof===h||a.$$typeof===g||a.$$typeof===c||a.$$typeof===l||a.$$typeof===d||a.$$typeof===ve||a.getModuleId!==void 0))}function xe(a,m,E){var N=a.displayName;if(N)return N;var z=m.displayName||m.name||"";return z!==""?E+"("+z+")":E}function Se(a){return a.displayName||"Context"}function te(a){if(a==null)return null;if(typeof a.tag=="number"&&D("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case n:return"Fragment";case r:return"Portal";case o:return"Profiler";case s:return"StrictMode";case u:return"Suspense";case f:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case l:var m=a;return Se(m)+".Consumer";case c:var E=a;return Se(E._context)+".Provider";case d:return xe(a,a.render,"ForwardRef");case g:var N=a.displayName||null;return N!==null?N:te(a.type)||"Memo";case h:{var z=a,X=z._payload,W=z._init;try{return te(W(X))}catch{return null}}}return null}var re=Object.assign,pe=0,se,le,ye,Ee,y,T,M;function A(){}A.__reactDisabledLog=!0;function _(){{if(pe===0){se=console.log,le=console.info,ye=console.warn,Ee=console.error,y=console.group,T=console.groupCollapsed,M=console.groupEnd;var a={configurable:!0,enumerable:!0,value:A,writable:!0};Object.defineProperties(console,{info:a,log:a,warn:a,error:a,group:a,groupCollapsed:a,groupEnd:a})}pe++}}function U(){{if(pe--,pe===0){var a={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:re({},a,{value:se}),info:re({},a,{value:le}),warn:re({},a,{value:ye}),error:re({},a,{value:Ee}),group:re({},a,{value:y}),groupCollapsed:re({},a,{value:T}),groupEnd:re({},a,{value:M})})}pe<0&&D("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var I=C.ReactCurrentDispatcher,P;function L(a,m,E){{if(P===void 0)try{throw Error()}catch(z){var N=z.stack.trim().match(/\n( *(at )?)/);P=N&&N[1]||""}return`
`+P+a}}var V=!1,F;{var ee=typeof WeakMap=="function"?WeakMap:Map;F=new ee}function S(a,m){if(!a||V)return"";{var E=F.get(a);if(E!==void 0)return E}var N;V=!0;var z=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var X;X=I.current,I.current=null,_();try{if(m){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(ce){N=ce}Reflect.construct(a,[],W)}else{try{W.call()}catch(ce){N=ce}a.call(W.prototype)}}else{try{throw Error()}catch(ce){N=ce}a()}}catch(ce){if(ce&&N&&typeof ce.stack=="string"){for(var $=ce.stack.split(`
`),ie=N.stack.split(`
`),Z=$.length-1,Q=ie.length-1;Z>=1&&Q>=0&&$[Z]!==ie[Q];)Q--;for(;Z>=1&&Q>=0;Z--,Q--)if($[Z]!==ie[Q]){if(Z!==1||Q!==1)do if(Z--,Q--,Q<0||$[Z]!==ie[Q]){var he=`
`+$[Z].replace(" at new "," at ");return a.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",a.displayName)),typeof a=="function"&&F.set(a,he),he}while(Z>=1&&Q>=0);break}}}finally{V=!1,I.current=X,U(),Error.prepareStackTrace=z}var ke=a?a.displayName||a.name:"",je=ke?L(ke):"";return typeof a=="function"&&F.set(a,je),je}function w(a,m,E){return S(a,!1)}function ge(a){var m=a.prototype;return!!(m&&m.isReactComponent)}function De(a,m,E){if(a==null)return"";if(typeof a=="function")return S(a,ge(a));if(typeof a=="string")return L(a);switch(a){case u:return L("Suspense");case f:return L("SuspenseList")}if(typeof a=="object")switch(a.$$typeof){case d:return w(a.render);case g:return De(a.type,m,E);case h:{var N=a,z=N._payload,X=N._init;try{return De(X(z),m,E)}catch{}}}return""}var Be=Object.prototype.hasOwnProperty,on={},an=C.ReactDebugCurrentFrame;function tt(a){if(a){var m=a._owner,E=De(a.type,a._source,m?m.type:null);an.setExtraStackFrame(E)}else an.setExtraStackFrame(null)}function _i(a,m,E,N,z){{var X=Function.call.bind(Be);for(var W in a)if(X(a,W)){var $=void 0;try{if(typeof a[W]!="function"){var ie=Error((N||"React class")+": "+E+" type `"+W+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof a[W]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw ie.name="Invariant Violation",ie}$=a[W](m,W,N,E,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Z){$=Z}$&&!($ instanceof Error)&&(tt(z),D("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",N||"React class",E,W,typeof $),tt(null)),$ instanceof Error&&!($.message in on)&&(on[$.message]=!0,tt(z),D("Failed %s type: %s",E,$.message),tt(null))}}}var Ii=Array.isArray;function Ut(a){return Ii(a)}function Pi(a){{var m=typeof Symbol=="function"&&Symbol.toStringTag,E=m&&a[Symbol.toStringTag]||a.constructor.name||"Object";return E}}function Ri(a){try{return cn(a),!1}catch{return!0}}function cn(a){return""+a}function ln(a){if(Ri(a))return D("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Pi(a)),cn(a)}var Ue=C.ReactCurrentOwner,Ai={key:!0,ref:!0,__self:!0,__source:!0},un,dn,Vt;Vt={};function ki(a){if(Be.call(a,"ref")){var m=Object.getOwnPropertyDescriptor(a,"ref").get;if(m&&m.isReactWarning)return!1}return a.ref!==void 0}function Mi(a){if(Be.call(a,"key")){var m=Object.getOwnPropertyDescriptor(a,"key").get;if(m&&m.isReactWarning)return!1}return a.key!==void 0}function Li(a,m){if(typeof a.ref=="string"&&Ue.current&&m&&Ue.current.stateNode!==m){var E=te(Ue.current.type);Vt[E]||(D('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',te(Ue.current.type),a.ref),Vt[E]=!0)}}function Fi(a,m){{var E=function(){un||(un=!0,D("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",m))};E.isReactWarning=!0,Object.defineProperty(a,"key",{get:E,configurable:!0})}}function Hi(a,m){{var E=function(){dn||(dn=!0,D("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",m))};E.isReactWarning=!0,Object.defineProperty(a,"ref",{get:E,configurable:!0})}}var Bi=function(a,m,E,N,z,X,W){var $={$$typeof:e,type:a,key:m,ref:E,props:W,_owner:X};return $._store={},Object.defineProperty($._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty($,"_self",{configurable:!1,enumerable:!1,writable:!1,value:N}),Object.defineProperty($,"_source",{configurable:!1,enumerable:!1,writable:!1,value:z}),Object.freeze&&(Object.freeze($.props),Object.freeze($)),$};function Ui(a,m,E,N,z){{var X,W={},$=null,ie=null;E!==void 0&&(ln(E),$=""+E),Mi(m)&&(ln(m.key),$=""+m.key),ki(m)&&(ie=m.ref,Li(m,z));for(X in m)Be.call(m,X)&&!Ai.hasOwnProperty(X)&&(W[X]=m[X]);if(a&&a.defaultProps){var Z=a.defaultProps;for(X in Z)W[X]===void 0&&(W[X]=Z[X])}if($||ie){var Q=typeof a=="function"?a.displayName||a.name||"Unknown":a;$&&Fi(W,Q),ie&&Hi(W,Q)}return Bi(a,$,ie,z,N,Ue.current,W)}}var $t=C.ReactCurrentOwner,fn=C.ReactDebugCurrentFrame;function Ae(a){if(a){var m=a._owner,E=De(a.type,a._source,m?m.type:null);fn.setExtraStackFrame(E)}else fn.setExtraStackFrame(null)}var Wt;Wt=!1;function Yt(a){return typeof a=="object"&&a!==null&&a.$$typeof===e}function pn(){{if($t.current){var a=te($t.current.type);if(a)return`

Check the render method of \``+a+"`."}return""}}function Vi(a){{if(a!==void 0){var m=a.fileName.replace(/^.*[\\\/]/,""),E=a.lineNumber;return`

Check your code at `+m+":"+E+"."}return""}}var gn={};function $i(a){{var m=pn();if(!m){var E=typeof a=="string"?a:a.displayName||a.name;E&&(m=`

Check the top-level render call using <`+E+">.")}return m}}function hn(a,m){{if(!a._store||a._store.validated||a.key!=null)return;a._store.validated=!0;var E=$i(m);if(gn[E])return;gn[E]=!0;var N="";a&&a._owner&&a._owner!==$t.current&&(N=" It was passed a child from "+te(a._owner.type)+"."),Ae(a),D('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',E,N),Ae(null)}}function mn(a,m){{if(typeof a!="object")return;if(Ut(a))for(var E=0;E<a.length;E++){var N=a[E];Yt(N)&&hn(N,m)}else if(Yt(a))a._store&&(a._store.validated=!0);else if(a){var z=O(a);if(typeof z=="function"&&z!==a.entries)for(var X=z.call(a),W;!(W=X.next()).done;)Yt(W.value)&&hn(W.value,m)}}}function Wi(a){{var m=a.type;if(m==null||typeof m=="string")return;var E;if(typeof m=="function")E=m.propTypes;else if(typeof m=="object"&&(m.$$typeof===d||m.$$typeof===g))E=m.propTypes;else return;if(E){var N=te(m);_i(E,a.props,"prop",N,a)}else if(m.PropTypes!==void 0&&!Wt){Wt=!0;var z=te(m);D("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",z||"Unknown")}typeof m.getDefaultProps=="function"&&!m.getDefaultProps.isReactClassApproved&&D("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Yi(a){{for(var m=Object.keys(a.props),E=0;E<m.length;E++){var N=m[E];if(N!=="children"&&N!=="key"){Ae(a),D("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",N),Ae(null);break}}a.ref!==null&&(Ae(a),D("Invalid attribute `ref` supplied to `React.Fragment`."),Ae(null))}}var vn={};function yn(a,m,E,N,z,X){{var W=Te(a);if(!W){var $="";(a===void 0||typeof a=="object"&&a!==null&&Object.keys(a).length===0)&&($+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var ie=Vi(z);ie?$+=ie:$+=pn();var Z;a===null?Z="null":Ut(a)?Z="array":a!==void 0&&a.$$typeof===e?(Z="<"+(te(a.type)||"Unknown")+" />",$=" Did you accidentally export a JSX literal instead of a component?"):Z=typeof a,D("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Z,$)}var Q=Ui(a,m,E,z,X);if(Q==null)return Q;if(W){var he=m.children;if(he!==void 0)if(N)if(Ut(he)){for(var ke=0;ke<he.length;ke++)mn(he[ke],a);Object.freeze&&Object.freeze(he)}else D("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else mn(he,a)}if(Be.call(m,"key")){var je=te(a),ce=Object.keys(m).filter(function(Ji){return Ji!=="key"}),zt=ce.length>0?"{key: someKey, "+ce.join(": ..., ")+": ...}":"{key: someKey}";if(!vn[je+zt]){var Xi=ce.length>0?"{"+ce.join(": ..., ")+": ...}":"{}";D(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,zt,je,Xi,je),vn[je+zt]=!0}}return a===n?Yi(Q):Wi(Q),Q}}function zi(a,m,E){return yn(a,m,E,!0)}function Gi(a,m,E){return yn(a,m,E,!1)}var qi=Gi,Ki=zi;Le.Fragment=n,Le.jsx=qi,Le.jsxs=Ki}()),Le}process.env.NODE_ENV==="production"?rt.exports=bn():rt.exports=xn();var i=rt.exports;let oe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const Xt=t=>{let e;const r=new Set,n=(f,g)=>{const h=typeof f=="function"?f(e):f;if(!Object.is(h,e)){const p=e;e=g??(typeof h!="object"||h===null)?h:Object.assign({},e,h),r.forEach(x=>x(e,p))}},s=()=>e,d={setState:n,getState:s,getInitialState:()=>u,subscribe:f=>(r.add(f),()=>r.delete(f)),destroy:()=>{r.clear()}},u=e=t(n,s,d);return d},Sn=t=>t?Xt(t):Xt;var nt={exports:{}},st={},Ve={exports:{}},ot={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt;function En(){if(Jt)return ot;Jt=1;var t=j;function e(g,h){return g===h&&(g!==0||1/g===1/h)||g!==g&&h!==h}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function l(g,h){var p=h(),x=n({inst:{value:p,getSnapshot:h}}),v=x[0].inst,O=x[1];return o(function(){v.value=p,v.getSnapshot=h,d(v)&&O({inst:v})},[g,p,h]),s(function(){return d(v)&&O({inst:v}),g(function(){d(v)&&O({inst:v})})},[g]),c(p),p}function d(g){var h=g.getSnapshot;g=g.value;try{var p=h();return!r(g,p)}catch{return!0}}function u(g,h){return h()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return ot.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,ot}var it={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt;function Tn(){return Zt||(Zt=1,process.env.NODE_ENV!=="production"&&function(){function t(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}function e(p,x){f||s.startTransition===void 0||(f=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var v=x();if(!g){var O=x();o(v,O)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),g=!0)}O=c({inst:{value:v,getSnapshot:x}});var C=O[0].inst,D=O[1];return d(function(){C.value=v,C.getSnapshot=x,r(C)&&D({inst:C})},[p,v,x]),l(function(){return r(C)&&D({inst:C}),p(function(){r(C)&&D({inst:C})})},[p]),u(v),v}function r(p){var x=p.getSnapshot;p=p.value;try{var v=x();return!o(p,v)}catch{return!0}}function n(p,x){return x()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var s=j,o=typeof Object.is=="function"?Object.is:t,c=s.useState,l=s.useEffect,d=s.useLayoutEffect,u=s.useDebugValue,f=!1,g=!1,h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:e;it.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:h,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),it}var Qt;function er(){return Qt||(Qt=1,process.env.NODE_ENV==="production"?Ve.exports=En():Ve.exports=Tn()),Ve.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tr;function On(){if(tr)return st;tr=1;var t=j,e=er();function r(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,o=t.useRef,c=t.useEffect,l=t.useMemo,d=t.useDebugValue;return st.useSyncExternalStoreWithSelector=function(u,f,g,h,p){var x=o(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=l(function(){function C(B){if(!D){if(D=!0,k=B,B=h(B),p!==void 0&&v.hasValue){var Y=v.value;if(p(Y,B))return H=Y}return H=B}if(Y=H,n(k,B))return Y;var ne=h(B);return p!==void 0&&p(Y,ne)?(k=B,Y):(k=B,H=ne)}var D=!1,k,H,b=g===void 0?null:g;return[function(){return C(f())},b===null?void 0:function(){return C(b())}]},[f,g,h,p]);var O=s(u,x[0],x[1]);return c(function(){v.hasValue=!0,v.value=O},[O]),d(O),O},st}var at={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rr;function wn(){return rr||(rr=1,process.env.NODE_ENV!=="production"&&function(){function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var e=j,r=er(),n=typeof Object.is=="function"?Object.is:t,s=r.useSyncExternalStore,o=e.useRef,c=e.useEffect,l=e.useMemo,d=e.useDebugValue;at.useSyncExternalStoreWithSelector=function(u,f,g,h,p){var x=o(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=l(function(){function C(B){if(!D){if(D=!0,k=B,B=h(B),p!==void 0&&v.hasValue){var Y=v.value;if(p(Y,B))return H=Y}return H=B}if(Y=H,n(k,B))return Y;var ne=h(B);return p!==void 0&&p(Y,ne)?(k=B,Y):(k=B,H=ne)}var D=!1,k,H,b=g===void 0?null:g;return[function(){return C(f())},b===null?void 0:function(){return C(b())}]},[f,g,h,p]);var O=s(u,x[0],x[1]);return c(function(){v.hasValue=!0,v.value=O},[O]),d(O),O},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()),at}process.env.NODE_ENV==="production"?nt.exports=On():nt.exports=wn();var Cn=nt.exports;const Dn=Gt(Cn),{useDebugValue:jn}=j,{useSyncExternalStoreWithSelector:Nn}=Dn;let Zi=!1;const _n=t=>t;function In(t,e=_n,r){const n=Nn(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return jn(n),n}const nr=t=>{const e=typeof t=="function"?Sn(t):t,r=(n,s)=>In(e,n,s);return Object.assign(r,e),r},Pn=t=>t?nr(t):nr,ct=[{type:"section",icon:"fa-columns",label:"Section",category:"layout",defaultProps:{style:{backgroundColor:"#f9fafb",padding:"16px",marginBottom:"16px"},children:[]}},{type:"spacer",icon:"fa-arrows-alt-v",label:"Spacer",category:"layout",defaultProps:{style:{height:"40px"}}},{type:"divider",icon:"fa-minus",label:"Divider",category:"layout",defaultProps:{style:{borderTop:"1px solid #e5e7eb",marginTop:"8px",marginBottom:"8px"}}},{type:"columns",icon:"fa-table-columns",label:"Columns",category:"layout",defaultProps:{style:{display:"flex",flexDirection:"row",gap:"16px"},columnCount:2,children:[]}},{type:"heading",icon:"fa-heading",label:"Heading",category:"content",defaultProps:{tagName:"h2",content:"Welcome to our Newsletter",style:{fontSize:"20px",fontWeight:"bold",color:"#333333",marginTop:"0",marginBottom:"16px"}}},{type:"text",icon:"fa-align-left",label:"Text",category:"content",defaultProps:{tagName:"p",content:"This is a paragraph of text. You can edit this content to add your own message.",style:{fontSize:"16px",lineHeight:"1.5",color:"#4b5563",marginTop:"0",marginBottom:"16px"}}},{type:"image",icon:"fa-image",label:"Image",category:"content",defaultProps:{tagName:"img",attributes:{src:"https://placehold.co/600x200/e2e8f0/a0aec0?text=Image",alt:"Image description"},style:{maxWidth:"100%",height:"auto",display:"block",marginLeft:"auto",marginRight:"auto"}}},{type:"button",icon:"fa-square",label:"Button",category:"content",defaultProps:{tagName:"a",content:"Click Me",attributes:{href:"#"},style:{display:"inline-block",padding:"12px 24px",backgroundColor:"#3182ce",color:"#ffffff",textDecoration:"none",fontWeight:"600",borderRadius:"4px",textAlign:"center"}}},{type:"social",icon:"fa-share-nodes",label:"Social",category:"advanced",defaultProps:{style:{display:"flex",justifyContent:"center",gap:"16px",marginTop:"16px",marginBottom:"16px"},socialLinks:[{platform:"facebook",url:"#",icon:"fab fa-facebook-f",color:"#3b5998"},{platform:"twitter",url:"#",icon:"fab fa-twitter",color:"#1da1f2"},{platform:"instagram",url:"#",icon:"fab fa-instagram",color:"#e1306c"},{platform:"linkedin",url:"#",icon:"fab fa-linkedin-in",color:"#0077b5"}]}},{type:"video",icon:"fa-play",label:"Video",category:"advanced",defaultProps:{tagName:"div",attributes:{videoUrl:"https://www.youtube.com/embed/dQw4w9WgXcQ"},style:{position:"relative",width:"100%",height:"0",paddingBottom:"56.25%",backgroundColor:"#f3f4f6",borderRadius:"4px",overflow:"hidden"}}}],sr=t=>{const e=ct.find(r=>r.type===t);if(!e)throw new Error(`Component type ${t} not found`);return{id:oe(),type:e.type,content:e.defaultProps.content||"",props:{...e.defaultProps}}},Oe={width:600,fontFamily:"Helvetica, Arial, sans-serif",backgroundColor:"#f5f5f5",showMobilePreview:!1,showDesktopPreview:!0},lt=(t="Untitled Template")=>({id:oe(),name:t,components:[],settings:Oe}),K=Pn(t=>({template:lt(),selectedComponentId:null,isPropertiesPanelOpen:!1,isComponentPanelOpen:!0,isSettingsPanelOpen:!1,isOutputModalOpen:!1,initializeTemplate:()=>{t({template:lt()})},addComponent:e=>{t(r=>{const n=sr(e);return{template:{...r.template,components:[...r.template.components,n]},selectedComponentId:n.id,isPropertiesPanelOpen:!0,isComponentPanelOpen:!1}})},removeComponent:e=>{t(r=>{const n=r.template.components.filter(s=>s.id!==e);return{template:{...r.template,components:n},selectedComponentId:null,isPropertiesPanelOpen:!1,isComponentPanelOpen:!0}})},updateComponent:(e,r)=>{t(n=>{const s=n.template.components.map(o=>o.id===e?{...o,...r}:o);return{template:{...n.template,components:s}}})},updateComponentProps:(e,r)=>{t(n=>{const s=n.template.components.map(o=>o.id===e?{...o,props:{...o.props,...r}}:o);return{template:{...n.template,components:s}}})},updateComponentContent:(e,r)=>{t(n=>{const s=n.template.components.map(o=>o.id===e?{...o,content:r}:o);return{template:{...n.template,components:s}}})},selectComponent:e=>{t({selectedComponentId:e,isPropertiesPanelOpen:e!==null,isComponentPanelOpen:e===null,isSettingsPanelOpen:!1})},openComponentPanel:()=>{t({isComponentPanelOpen:!0,isPropertiesPanelOpen:!1,isSettingsPanelOpen:!1})},openPropertiesPanel:()=>{t({isPropertiesPanelOpen:!0,isComponentPanelOpen:!1,isSettingsPanelOpen:!1})},openSettingsPanel:()=>{t({isSettingsPanelOpen:!0,isPropertiesPanelOpen:!1,isComponentPanelOpen:!1,selectedComponentId:null})},updateTemplateSettings:e=>{t(r=>({template:{...r.template,settings:{...r.template.settings,...e}}}))},setOutputModalOpen:e=>{t({isOutputModalOpen:e})}})),Rn=()=>{const{isComponentPanelOpen:t,isPropertiesPanelOpen:e,isSettingsPanelOpen:r,openComponentPanel:n,openPropertiesPanel:s,openSettingsPanel:o,setOutputModalOpen:c}=K();return i.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs("h1",{className:"text-2xl font-semibold text-gray-800",children:[i.jsx("span",{className:"text-primary font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#E61DAB] to-[#8E33FF]",children:"Public Circles"}),i.jsx("span",{className:"ml-2 text-lg",children:"Email Builder"})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("nav",{className:"hidden md:flex space-x-1",children:[i.jsx("button",{className:`px-3 py-2 rounded-md text-sm font-medium ${t?"bg-[#EFD6FF] text-[#8E33FF]":"text-gray-700 hover:bg-gray-100"}`,onClick:n,children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"fas fa-th-large text-xs"}),"Components"]})}),i.jsx("button",{className:`px-3 py-2 rounded-md text-sm font-medium ${e?"bg-[#EFD6FF] text-[#8E33FF]":"text-gray-700 hover:bg-gray-100"}`,onClick:s,children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"fas fa-sliders-h text-xs"}),"Properties"]})}),i.jsx("button",{className:`px-3 py-2 rounded-md text-sm font-medium ${r?"bg-[#EFD6FF] text-[#8E33FF]":"text-gray-700 hover:bg-gray-100"}`,onClick:o,children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"fas fa-cog text-xs"}),"Settings"]})})]}),i.jsx("div",{children:i.jsxs("button",{className:"px-4 py-2 flex items-center gap-2 bg-gradient-to-r from-[#E61DAB] to-[#8E33FF] text-white rounded-md hover:from-[#F1136C] hover:to-[#5119B7] transition-all shadow-sm hover:shadow",onClick:()=>c(!0),children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"h-4 w-4",children:[i.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),i.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),i.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save HTML"]})})]})]})})})},or=j.createContext({dragDropManager:void 0});function ue(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var ir=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ut=function(){return Math.random().toString(36).substring(7).split("").join(".")},ar={INIT:"@@redux/INIT"+ut(),REPLACE:"@@redux/REPLACE"+ut(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ut()}};function An(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function kn(t){if(t===void 0)return"undefined";if(t===null)return"null";var e=typeof t;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(t))return"array";if(Fn(t))return"date";if(Ln(t))return"error";var r=Mn(t);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}function Mn(t){return typeof t.constructor=="function"?t.constructor.name:null}function Ln(t){return t instanceof Error||typeof t.message=="string"&&t.constructor&&typeof t.constructor.stackTraceLimit=="number"}function Fn(t){return t instanceof Date?!0:typeof t.toDateString=="function"&&typeof t.getDate=="function"&&typeof t.setDate=="function"}function Ne(t){var e=typeof t;return process.env.NODE_ENV!=="production"&&(e=kn(t)),e}function cr(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(process.env.NODE_ENV==="production"?ue(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(process.env.NODE_ENV==="production"?ue(1):"Expected the enhancer to be a function. Instead, received: '"+Ne(r)+"'");return r(cr)(t,e)}if(typeof t!="function")throw new Error(process.env.NODE_ENV==="production"?ue(2):"Expected the root reducer to be a function. Instead, received: '"+Ne(t)+"'");var s=t,o=e,c=[],l=c,d=!1;function u(){l===c&&(l=c.slice())}function f(){if(d)throw new Error(process.env.NODE_ENV==="production"?ue(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function g(v){if(typeof v!="function")throw new Error(process.env.NODE_ENV==="production"?ue(4):"Expected the listener to be a function. Instead, received: '"+Ne(v)+"'");if(d)throw new Error(process.env.NODE_ENV==="production"?ue(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var O=!0;return u(),l.push(v),function(){if(O){if(d)throw new Error(process.env.NODE_ENV==="production"?ue(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");O=!1,u();var D=l.indexOf(v);l.splice(D,1),c=null}}}function h(v){if(!An(v))throw new Error(process.env.NODE_ENV==="production"?ue(7):"Actions must be plain objects. Instead, the actual type was: '"+Ne(v)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(typeof v.type>"u")throw new Error(process.env.NODE_ENV==="production"?ue(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(d)throw new Error(process.env.NODE_ENV==="production"?ue(9):"Reducers may not dispatch actions.");try{d=!0,o=s(o,v)}finally{d=!1}for(var O=c=l,C=0;C<O.length;C++){var D=O[C];D()}return v}function p(v){if(typeof v!="function")throw new Error(process.env.NODE_ENV==="production"?ue(10):"Expected the nextReducer to be a function. Instead, received: '"+Ne(v));s=v,h({type:ar.REPLACE})}function x(){var v,O=g;return v={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(process.env.NODE_ENV==="production"?ue(11):"Expected the observer to be an object. Instead, received: '"+Ne(D)+"'");function k(){D.next&&D.next(f())}k();var H=O(k);return{unsubscribe:H}}},v[ir]=function(){return this},v}return h({type:ar.INIT}),n={dispatch:h,subscribe:g,getState:f,replaceReducer:p},n[ir]=x,n}function R(t,e,...r){if(Hn()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;n=new Error(e.replace(/%s/g,function(){return r[s++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Hn(){return typeof process<"u"&&process.env.NODE_ENV==="production"}function Bn(t,e,r){return e.split(".").reduce((n,s)=>n&&n[s]?n[s]:r||null,t)}function Un(t,e){return t.filter(r=>r!==e)}function lr(t){return typeof t=="object"}function Vn(t,e){const r=new Map,n=o=>{r.set(o,r.has(o)?r.get(o)+1:1)};t.forEach(n),e.forEach(n);const s=[];return r.forEach((o,c)=>{o===1&&s.push(c)}),s}function $n(t,e){return t.filter(r=>e.indexOf(r)>-1)}const dt="dnd-core/INIT_COORDS",$e="dnd-core/BEGIN_DRAG",ft="dnd-core/PUBLISH_DRAG_SOURCE",We="dnd-core/HOVER",Ye="dnd-core/DROP",ze="dnd-core/END_DRAG";function ur(t,e){return{type:dt,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Wn={type:dt,payload:{clientOffset:null,sourceClientOffset:null}};function Yn(t){return function(r=[],n={publishSource:!0}){const{publishSource:s=!0,clientOffset:o,getSourceClientOffset:c}=n,l=t.getMonitor(),d=t.getRegistry();t.dispatch(ur(o)),zn(r,l,d);const u=Kn(r,l);if(u==null){t.dispatch(Wn);return}let f=null;if(o){if(!c)throw new Error("getSourceClientOffset must be defined");Gn(c),f=c(u)}t.dispatch(ur(o,f));const h=d.getSource(u).beginDrag(l,u);if(h==null)return;qn(h),d.pinSource(u);const p=d.getSourceType(u);return{type:$e,payload:{itemType:p,item:h,sourceId:u,clientOffset:o||null,sourceClientOffset:f||null,isSourcePublic:!!s}}}}function zn(t,e,r){R(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(n){R(r.getSource(n),"Expected sourceIds to be registered.")})}function Gn(t){R(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function qn(t){R(lr(t),"Item must be an object.")}function Kn(t,e){let r=null;for(let n=t.length-1;n>=0;n--)if(e.canDragSource(t[n])){r=t[n];break}return r}function Xn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Xn(t,s,r[s])})}return t}function Zn(t){return function(r={}){const n=t.getMonitor(),s=t.getRegistry();Qn(n),rs(n).forEach((c,l)=>{const d=es(c,l,s,n),u={type:Ye,payload:{dropResult:Jn({},r,d)}};t.dispatch(u)})}}function Qn(t){R(t.isDragging(),"Cannot call drop while not dragging."),R(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function es(t,e,r,n){const s=r.getTarget(t);let o=s?s.drop(n,t):void 0;return ts(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function ts(t){R(typeof t>"u"||lr(t),"Drop result must either be an object or undefined.")}function rs(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function ns(t){return function(){const r=t.getMonitor(),n=t.getRegistry();ss(r);const s=r.getSourceId();return s!=null&&(n.getSource(s,!0).endDrag(r,s),n.unpinSource()),{type:ze}}}function ss(t){R(t.isDragging(),"Cannot call endDrag while not dragging.")}function pt(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function os(t){return function(r,{clientOffset:n}={}){is(r);const s=r.slice(0),o=t.getMonitor(),c=t.getRegistry(),l=o.getItemType();return cs(s,c,l),as(s,o,c),ls(s,o,c),{type:We,payload:{targetIds:s,clientOffset:n||null}}}}function is(t){R(Array.isArray(t),"Expected targetIds to be an array.")}function as(t,e,r){R(e.isDragging(),"Cannot call hover while not dragging."),R(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<t.length;n++){const s=t[n];R(t.lastIndexOf(s)===n,"Expected targetIds to be unique in the passed array.");const o=r.getTarget(s);R(o,"Expected targetIds to be registered.")}}function cs(t,e,r){for(let n=t.length-1;n>=0;n--){const s=t[n],o=e.getTargetType(s);pt(o,r)||t.splice(n,1)}}function ls(t,e,r){t.forEach(function(n){r.getTarget(n).hover(e,n)})}function us(t){return function(){if(t.getMonitor().isDragging())return{type:ft}}}function ds(t){return{beginDrag:Yn(t),publishDragSource:us(t),hover:os(t),drop:Zn(t),endDrag:ns(t)}}class fs{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function n(o){return(...c)=>{const l=o.apply(e,c);typeof l<"u"&&r(l)}}const s=ds(this);return Object.keys(s).reduce((o,c)=>{const l=s[c];return o[c]=n(l),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function ps(t,e){return{x:t.x+e.x,y:t.y+e.y}}function dr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gs(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:n}=t;return!e||!r||!n?null:dr(ps(e,n),r)}function hs(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:dr(e,r)}const Fe=[],gt=[];Fe.__IS_NONE__=!0,gt.__IS_ALL__=!0;function ms(t,e){return t===Fe?!1:t===gt||typeof e>"u"?!0:$n(e,t).length>0}class vs{subscribeToStateChange(e,r={}){const{handlerIds:n}=r;R(typeof e=="function","listener must be a function."),R(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const o=()=>{const c=this.store.getState(),l=c.stateId;try{l===s||l===s+1&&!ms(c.dirtyHandlerIds,n)||e()}finally{s=l}};return this.store.subscribe(o)}subscribeToOffsetChange(e){R(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const n=()=>{const s=this.store.getState().dragOffset;s!==r&&(r=s,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return R(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(R(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),s=this.getItemType();return pt(n,s)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(R(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),s=this.getItemType();return n!==s?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:n}=r;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();if(o&&!pt(s,o))return!1;const c=this.getTargetIds();if(!c.length)return!1;const l=c.indexOf(e);return n?l===c.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return gs(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return hs(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const fr=typeof global<"u"?global:self,pr=fr.MutationObserver||fr.WebKitMutationObserver;function gr(t){return function(){const r=setTimeout(s,0),n=setInterval(s,50);function s(){clearTimeout(r),clearInterval(n),t()}}}function ys(t){let e=1;const r=new pr(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const bs=typeof pr=="function"?ys:gr;class xs{enqueueTask(e){const{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let n=0,s=e.length-this.index;n<s;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=bs(this.flush),this.requestErrorThrow=gr(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Ss{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Es{create(e){const r=this.freeTasks,n=r.length?r.pop():new Ss(this.onError,s=>r[r.length]=s);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const hr=new xs,Ts=new Es(hr.registerPendingError);function Os(t){hr.enqueueTask(Ts.create(t))}const ht="dnd-core/ADD_SOURCE",mt="dnd-core/ADD_TARGET",vt="dnd-core/REMOVE_SOURCE",Ge="dnd-core/REMOVE_TARGET";function ws(t){return{type:ht,payload:{sourceId:t}}}function Cs(t){return{type:mt,payload:{targetId:t}}}function Ds(t){return{type:vt,payload:{sourceId:t}}}function js(t){return{type:Ge,payload:{targetId:t}}}function Ns(t){R(typeof t.canDrag=="function","Expected canDrag to be a function."),R(typeof t.beginDrag=="function","Expected beginDrag to be a function."),R(typeof t.endDrag=="function","Expected endDrag to be a function.")}function _s(t){R(typeof t.canDrop=="function","Expected canDrop to be a function."),R(typeof t.hover=="function","Expected hover to be a function."),R(typeof t.drop=="function","Expected beginDrag to be a function.")}function yt(t,e){if(e&&Array.isArray(t)){t.forEach(r=>yt(r,!1));return}R(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var de;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(de||(de={}));let Is=0;function Ps(){return Is++}function Rs(t){const e=Ps().toString();switch(t){case de.SOURCE:return`S${e}`;case de.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function mr(t){switch(t[0]){case"S":return de.SOURCE;case"T":return de.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function vr(t,e){const r=t.entries();let n=!1;do{const{done:s,value:[,o]}=r.next();if(o===e)return!0;n=!!s}while(!n);return!1}class As{addSource(e,r){yt(e),Ns(r);const n=this.addHandler(de.SOURCE,e,r);return this.store.dispatch(ws(n)),n}addTarget(e,r){yt(e,!0),_s(r);const n=this.addHandler(de.TARGET,e,r);return this.store.dispatch(Cs(n)),n}containsHandler(e){return vr(this.dragSources,e)||vr(this.dropTargets,e)}getSource(e,r=!1){return R(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return R(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return R(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return R(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return mr(e)===de.SOURCE}isTargetId(e){return mr(e)===de.TARGET}removeSource(e){R(this.getSource(e),"Expected an existing source."),this.store.dispatch(Ds(e)),Os(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){R(this.getTarget(e),"Expected an existing target."),this.store.dispatch(js(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);R(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){R(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,n){const s=Rs(e);return this.types.set(s,r),e===de.SOURCE?this.dragSources.set(s,n):e===de.TARGET&&this.dropTargets.set(s,n),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const ks=(t,e)=>t===e;function Ms(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Ls(t,e,r=ks){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!r(t[n],e[n]))return!1;return!0}function Fs(t=Fe,e){switch(e.type){case We:break;case ht:case mt:case Ge:case vt:return Fe;case $e:case ft:case ze:case Ye:default:return gt}const{targetIds:r=[],prevTargetIds:n=[]}=e.payload,s=Vn(r,n);if(!(s.length>0||!Ls(r,n)))return Fe;const c=n[n.length-1],l=r[r.length-1];return c!==l&&(c&&s.push(c),l&&s.push(l)),s}function Hs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Hs(t,s,r[s])})}return t}const yr={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Us(t=yr,e){const{payload:r}=e;switch(e.type){case dt:case $e:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case We:return Ms(t.clientOffset,r.clientOffset)?t:Bs({},t,{clientOffset:r.clientOffset});case ze:case Ye:return yr;default:return t}}function Vs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Vs(t,s,r[s])})}return t}const $s={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Ws(t=$s,e){const{payload:r}=e;switch(e.type){case $e:return _e({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case ft:return _e({},t,{isSourcePublic:!0});case We:return _e({},t,{targetIds:r.targetIds});case Ge:return t.targetIds.indexOf(r.targetId)===-1?t:_e({},t,{targetIds:Un(t.targetIds,r.targetId)});case Ye:return _e({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case ze:return _e({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Ys(t=0,e){switch(e.type){case ht:case mt:return t+1;case vt:case Ge:return t-1;default:return t}}function zs(t=0){return t+1}function Gs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){Gs(t,s,r[s])})}return t}function Ks(t={},e){return{dirtyHandlerIds:Fs(t.dirtyHandlerIds,{type:e.type,payload:qs({},e.payload,{prevTargetIds:Bn(t,"dragOperation.targetIds",[])})}),dragOffset:Us(t.dragOffset,e),refCount:Ys(t.refCount,e),dragOperation:Ws(t.dragOperation,e),stateId:zs(t.stateId)}}function Xs(t,e=void 0,r={},n=!1){const s=Js(n),o=new vs(s,new As(s)),c=new fs(s,o),l=t(c,e,r);return c.receiveBackend(l),c}function Js(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return cr(Ks,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Zs(t,e){if(t==null)return{};var r=Qs(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qs(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}let br=0;const qe=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var eo=j.memo(function(e){var{children:r}=e,n=Zs(e,["children"]);const[s,o]=to(n);return j.useEffect(()=>{if(o){const c=xr();return++br,()=>{--br===0&&(c[qe]=null)}}},[]),i.jsx(or.Provider,{value:s,children:r})});function to(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=ro(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function ro(t,e=xr(),r,n){const s=e;return s[qe]||(s[qe]={dragDropManager:Xs(t,e,r,n)}),s[qe]}function xr(){return typeof global<"u"?global:window}var Sr=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var c=o[s];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r};const no=Gt(Sr),we=typeof window<"u"?j.useLayoutEffect:j.useEffect;function so(t,e,r){const[n,s]=j.useState(()=>e(t)),o=j.useCallback(()=>{const c=e(t);no(n,c)||(s(c),r&&r())},[n,t,r]);return we(o),[n,o]}function oo(t,e,r){const[n,s]=so(t,e,r);return we(function(){const c=t.getHandlerId();if(c!=null)return t.subscribeToStateChange(s,{handlerIds:[c]})},[t,s]),n}function Er(t,e,r){return oo(e,t||(()=>({})),()=>r.reconnect())}function Tr(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),j.useMemo(()=>typeof t=="function"?t():t,r)}function io(t){return j.useMemo(()=>t.hooks.dragSource(),[t])}function ao(t){return j.useMemo(()=>t.hooks.dragPreview(),[t])}let bt=!1,xt=!1;class co{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){R(!bt,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return bt=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{bt=!1}}isDragging(){if(!this.sourceId)return!1;R(!xt,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return xt=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{xt=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let St=!1;class lo{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;R(!St,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return St=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{St=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function uo(t,e,r){const n=r.getRegistry(),s=n.addTarget(t,e);return[s,()=>n.removeTarget(s)]}function fo(t,e,r){const n=r.getRegistry(),s=n.addSource(t,e);return[s,()=>n.removeSource(s)]}function Et(t,e,r,n){let s=r?r.call(n,t,e):void 0;if(s!==void 0)return!!s;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const o=Object.keys(t),c=Object.keys(e);if(o.length!==c.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<o.length;d++){const u=o[d];if(!l(u))return!1;const f=t[u],g=e[u];if(s=r?r.call(n,f,g,u):void 0,s===!1||s===void 0&&f!==g)return!1}return!0}function Tt(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function po(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function go(t){return(e=null,r=null)=>{if(!j.isValidElement(e)){const o=e;return t(o,r),o}const n=e;return po(n),ho(n,r?o=>t(o,r):t)}}function Or(t){const e={};return Object.keys(t).forEach(r=>{const n=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const s=go(n);e[r]=()=>s}}),e}function wr(t,e){typeof t=="function"?t(e):t.current=e}function ho(t,e){const r=t.ref;return R(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?j.cloneElement(t,{ref:n=>{wr(r,n),wr(e,n)}}):j.cloneElement(t,{ref:e})}class mo{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Et(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Et(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Or({dragSource:(r,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Tt(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Tt(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class vo{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Et(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Or({dropTarget:(r,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Tt(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Ie(){const{dragDropManager:t}=j.useContext(or);return R(t!=null,"Expected drag drop context"),t}function yo(t,e){const r=Ie(),n=j.useMemo(()=>new mo(r.getBackend()),[r]);return we(()=>(n.dragSourceOptions=t||null,n.reconnect(),()=>n.disconnectDragSource()),[n,t]),we(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function bo(){const t=Ie();return j.useMemo(()=>new co(t),[t])}class xo{beginDrag(){const e=this.spec,r=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(r):n={},n??null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const n=this.spec,s=this.monitor,{isDragging:o}=n;return o?o(s):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,n=this.connector,{end:s}=e;s&&s(r.getItem(),r),n.reconnect()}constructor(e,r,n){this.spec=e,this.monitor=r,this.connector=n}}function So(t,e,r){const n=j.useMemo(()=>new xo(t,e,r),[e,r]);return j.useEffect(()=>{n.spec=t},[t]),n}function Eo(t){return j.useMemo(()=>{const e=t.type;return R(e!=null,"spec.type must be defined"),e},[t])}function To(t,e,r){const n=Ie(),s=So(t,e,r),o=Eo(t);we(function(){if(o!=null){const[l,d]=fo(o,s,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),d}},[n,e,r,s,o])}function Oo(t,e){const r=Tr(t,e);R(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=bo(),s=yo(r.options,r.previewOptions);return To(r,n,s),[Er(r.collect,n,s),io(s),ao(s)]}function wo(t){return j.useMemo(()=>t.hooks.dropTarget(),[t])}function Co(t){const e=Ie(),r=j.useMemo(()=>new vo(e.getBackend()),[e]);return we(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Do(){const t=Ie();return j.useMemo(()=>new lo(t),[t])}function jo(t){const{accept:e}=t;return j.useMemo(()=>(R(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class No{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function _o(t,e){const r=j.useMemo(()=>new No(t,e),[e]);return j.useEffect(()=>{r.spec=t},[t]),r}function Io(t,e,r){const n=Ie(),s=_o(t,e),o=jo(t);we(function(){const[l,d]=uo(o,s,n);return e.receiveHandlerId(l),r.receiveHandlerId(l),d},[n,e,s,r,o.map(c=>c.toString()).join("|")])}function Po(t,e){const r=Tr(t,e),n=Do(),s=Co(r.options);return Io(r,n,s),[Er(r.collect,n,s),wo(s)]}const Ot=({component:t})=>{const[{isDragging:e},r]=Oo(()=>({type:"COMPONENT",item:{componentType:t.type},collect:n=>({isDragging:!!n.isDragging()})}));return i.jsx("div",{ref:r,className:`border border-gray-200 rounded-md bg-white shadow-sm hover:shadow-md hover:border-[#DB7BD0] transition cursor-move ${e?"opacity-50":"opacity-100"}`,children:i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("i",{className:`fas ${t.icon} text-[#E61DAB] mr-2`}),i.jsx("span",{className:"text-sm font-medium",children:t.label})]}),i.jsxs("div",{className:"bg-gray-50 h-8 mt-2 rounded border border-gray-200 flex items-center justify-center",children:[t.type==="heading"&&i.jsx("div",{className:"w-3/4 h-4 bg-[#DB7BB0] bg-opacity-40 rounded"}),t.type==="text"&&i.jsxs("div",{className:"flex flex-col items-center justify-center px-2 w-full",children:[i.jsx("div",{className:"w-full h-1 bg-[#DB7BB0] bg-opacity-40 rounded mb-1"}),i.jsx("div",{className:"w-full h-1 bg-[#DB7BB0] bg-opacity-40 rounded mb-1"}),i.jsx("div",{className:"w-3/4 h-1 bg-[#DB7BB0] bg-opacity-40 rounded"})]}),t.type==="image"&&i.jsx("i",{className:"fas fa-mountain text-[#8E33FF]"}),t.type==="button"&&i.jsx("div",{className:"px-3 py-1 bg-gradient-to-r from-[#E61DAB] to-[#8E33FF] rounded text-white text-xs",children:"Button"}),t.type==="divider"&&i.jsx("div",{className:"w-3/4 h-[2px] bg-[#DB7BB0] bg-opacity-40"}),t.type==="spacer"&&i.jsxs("div",{className:"flex flex-col items-center justify-center w-3/4",children:[i.jsx("div",{className:"w-full h-[2px] bg-[#DB7BB0] bg-opacity-40 mb-2"}),i.jsx("div",{className:"w-full h-[2px] bg-[#DB7BB0] bg-opacity-40"})]}),t.type==="social"&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("i",{className:"fab fa-facebook-f text-[#8E33FF] text-xs"}),i.jsx("i",{className:"fab fa-twitter text-[#8E33FF] text-xs"}),i.jsx("i",{className:"fab fa-instagram text-[#8E33FF] text-xs"})]}),t.type==="section"&&i.jsx("div",{className:"border border-dashed border-[#8E33FF] w-3/4 h-6 rounded"}),t.type==="columns"&&i.jsxs("div",{className:"flex gap-1 w-3/4",children:[i.jsx("div",{className:"border border-dashed border-[#8E33FF] w-1/2 h-6 rounded"}),i.jsx("div",{className:"border border-dashed border-[#8E33FF] w-1/2 h-6 rounded"})]}),t.type==="video"&&i.jsx("i",{className:"fas fa-play text-[#8E33FF]"})]})]})})},Cr=()=>{const[t,e]=j.useState(""),r=ct.filter(c=>c.label.toLowerCase().includes(t.toLowerCase())),n=r.filter(c=>c.category==="layout"),s=r.filter(c=>c.category==="content"),o=r.filter(c=>c.category==="advanced");return i.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[i.jsx("div",{className:"mb-4",children:i.jsx("input",{type:"text",placeholder:"Search components...",value:t,onChange:c=>e(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent"})}),n.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xs uppercase tracking-wider text-gray-500 font-semibold mb-2",children:"Layout"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(c=>i.jsx(Ot,{component:c},c.type))})]}),s.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xs uppercase tracking-wider text-gray-500 font-semibold mb-2",children:"Content"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(c=>i.jsx(Ot,{component:c},c.type))})]}),o.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xs uppercase tracking-wider text-gray-500 font-semibold mb-2",children:"Advanced"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(c=>i.jsx(Ot,{component:c},c.type))})]})]})},Dr=()=>{const t=K(d=>d.template),e=K(d=>d.selectedComponentId),r=K(d=>d.updateComponentProps),n=K(d=>d.updateComponentContent),s=K(d=>d.removeComponent);if(!e)return i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Select a component to edit its properties"})});const o=t.components.find(d=>d.id===e);if(!o)return i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsx("p",{className:"text-gray-500 text-center py-8",children:"Component not found"})});const c=(d,u)=>{r(e,{style:{...o.props.style,[d]:u}})},l=()=>{var d,u,f,g,h,p,x,v,O,C,D,k,H,b,B,Y,ne,ve,Te,xe,Se,te,re,pe,se,le,ye,Ee,y,T,M,A,_,U,I,P,L,V,F,ee,S;switch(o.type){case"heading":case"text":return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Content"}),i.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md resize-none focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",rows:4,value:o.content,onChange:w=>n(e,w.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tag"}),i.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:o.props.tagName||"",onChange:w=>r(e,{tagName:w.target.value}),children:o.type==="heading"?i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"h1",children:"Heading 1"}),i.jsx("option",{value:"h2",children:"Heading 2"}),i.jsx("option",{value:"h3",children:"Heading 3"}),i.jsx("option",{value:"h4",children:"Heading 4"}),i.jsx("option",{value:"h5",children:"Heading 5"}),i.jsx("option",{value:"h6",children:"Heading 6"})]}):i.jsxs(i.Fragment,{children:[i.jsx("option",{value:"p",children:"Paragraph"}),i.jsx("option",{value:"div",children:"Div"}),i.jsx("option",{value:"span",children:"Span"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Size"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"10",max:"48",value:parseInt(((d=o.props.style)==null?void 0:d.fontSize)||"16"),onChange:w=>c("fontSize",`${w.target.value}px`),className:"w-full mr-2"}),i.jsxs("span",{className:"text-xs w-12 text-center",children:[parseInt(((u=o.props.style)==null?void 0:u.fontSize)||"16"),"px"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color"}),i.jsx("input",{type:"color",value:((f=o.props.style)==null?void 0:f.color)||"#000000",onChange:w=>c("color",w.target.value),className:"w-full h-10 p-1 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text Align"}),i.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[i.jsx("button",{className:`flex-1 py-2 ${((g=o.props.style)==null?void 0:g.textAlign)==="left"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>c("textAlign","left"),children:i.jsx("i",{className:"fas fa-align-left"})}),i.jsx("button",{className:`flex-1 py-2 ${((h=o.props.style)==null?void 0:h.textAlign)==="center"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>c("textAlign","center"),children:i.jsx("i",{className:"fas fa-align-center"})}),i.jsx("button",{className:`flex-1 py-2 ${((p=o.props.style)==null?void 0:p.textAlign)==="right"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>c("textAlign","right"),children:i.jsx("i",{className:"fas fa-align-right"})})]})]})]});case"image":return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image URL"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:((x=o.props.attributes)==null?void 0:x.src)||"",onChange:w=>r(e,{attributes:{...o.props.attributes,src:w.target.value}})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alt Text"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:((v=o.props.attributes)==null?void 0:v.alt)||"",onChange:w=>r(e,{attributes:{...o.props.attributes,alt:w.target.value}})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Width"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"10",max:"100",value:parseInt(((O=o.props.style)==null?void 0:O.width)||"100"),onChange:w=>c("width",`${w.target.value}%`),className:"w-full mr-2"}),i.jsxs("span",{className:"text-xs w-12 text-center",children:[parseInt(((C=o.props.style)==null?void 0:C.width)||"100"),"%"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alignment"}),i.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[i.jsx("button",{className:`flex-1 py-2 ${((D=o.props.style)==null?void 0:D.marginLeft)==="0"&&((k=o.props.style)==null?void 0:k.marginRight)==="auto"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>r(e,{style:{...o.props.style,marginLeft:"0",marginRight:"auto"}}),children:i.jsx("i",{className:"fas fa-align-left"})}),i.jsx("button",{className:`flex-1 py-2 ${((H=o.props.style)==null?void 0:H.marginLeft)==="auto"&&((b=o.props.style)==null?void 0:b.marginRight)==="auto"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>r(e,{style:{...o.props.style,marginLeft:"auto",marginRight:"auto"}}),children:i.jsx("i",{className:"fas fa-align-center"})}),i.jsx("button",{className:`flex-1 py-2 ${((B=o.props.style)==null?void 0:B.marginLeft)==="auto"&&((Y=o.props.style)==null?void 0:Y.marginRight)==="0"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>r(e,{style:{...o.props.style,marginLeft:"auto",marginRight:"0"}}),children:i.jsx("i",{className:"fas fa-align-right"})})]})]})]});case"button":return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Button Text"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:o.content,onChange:w=>n(e,w.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Link URL"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:((ne=o.props.attributes)==null?void 0:ne.href)||"#",onChange:w=>r(e,{attributes:{...o.props.attributes,href:w.target.value}})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Background Color"}),i.jsx("input",{type:"color",value:((ve=o.props.style)==null?void 0:ve.backgroundColor)||"#3182ce",onChange:w=>c("backgroundColor",w.target.value),className:"w-full h-10 p-1 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text Color"}),i.jsx("input",{type:"color",value:((Te=o.props.style)==null?void 0:Te.color)||"#ffffff",onChange:w=>c("color",w.target.value),className:"w-full h-10 p-1 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Padding"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"Horizontal"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"4",max:"48",value:parseInt(((xe=o.props.style)==null?void 0:xe.paddingLeft)||"24"),onChange:w=>{const ge=`${w.target.value}px`;r(e,{style:{...o.props.style,paddingLeft:ge,paddingRight:ge}})},className:"w-full mr-2"}),i.jsx("span",{className:"text-xs w-8 text-center",children:parseInt(((Se=o.props.style)==null?void 0:Se.paddingLeft)||"24")})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"Vertical"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"2",max:"32",value:parseInt(((te=o.props.style)==null?void 0:te.paddingTop)||"12"),onChange:w=>{const ge=`${w.target.value}px`;r(e,{style:{...o.props.style,paddingTop:ge,paddingBottom:ge}})},className:"w-full mr-2"}),i.jsx("span",{className:"text-xs w-8 text-center",children:parseInt(((re=o.props.style)==null?void 0:re.paddingTop)||"12")})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Border Radius"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"0",max:"24",value:parseInt(((pe=o.props.style)==null?void 0:pe.borderRadius)||"4"),onChange:w=>c("borderRadius",`${w.target.value}px`),className:"w-full mr-2"}),i.jsx("span",{className:"text-xs w-8 text-center",children:parseInt(((se=o.props.style)==null?void 0:se.borderRadius)||"4")})]})]})]});case"divider":return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Color"}),i.jsx("input",{type:"color",value:((le=o.props.style)==null?void 0:le.borderTopColor)||"#e5e7eb",onChange:w=>c("borderTopColor",w.target.value),className:"w-full h-10 p-1 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Thickness"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"1",max:"10",value:parseInt(((ye=o.props.style)==null?void 0:ye.borderTopWidth)||"1"),onChange:w=>c("borderTopWidth",`${w.target.value}px`),className:"w-full mr-2"}),i.jsxs("span",{className:"text-xs w-8 text-center",children:[parseInt(((Ee=o.props.style)==null?void 0:Ee.borderTopWidth)||"1"),"px"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Style"}),i.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:((y=o.props.style)==null?void 0:y.borderTopStyle)||"solid",onChange:w=>c("borderTopStyle",w.target.value),children:[i.jsx("option",{value:"solid",children:"Solid"}),i.jsx("option",{value:"dashed",children:"Dashed"}),i.jsx("option",{value:"dotted",children:"Dotted"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Spacing"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"Top"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"0",max:"48",value:parseInt(((T=o.props.style)==null?void 0:T.marginTop)||"8"),onChange:w=>c("marginTop",`${w.target.value}px`),className:"w-full mr-2"}),i.jsx("span",{className:"text-xs w-8 text-center",children:parseInt(((M=o.props.style)==null?void 0:M.marginTop)||"8")})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs mb-1",children:"Bottom"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"0",max:"48",value:parseInt(((A=o.props.style)==null?void 0:A.marginBottom)||"8"),onChange:w=>c("marginBottom",`${w.target.value}px`),className:"w-full mr-2"}),i.jsx("span",{className:"text-xs w-8 text-center",children:parseInt(((_=o.props.style)==null?void 0:_.marginBottom)||"8")})]})]})]})]})]});case"spacer":return i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Height"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"4",max:"120",value:parseInt(((U=o.props.style)==null?void 0:U.height)||"40"),onChange:w=>c("height",`${w.target.value}px`),className:"w-full mr-2"}),i.jsxs("span",{className:"text-xs w-12 text-center",children:[parseInt(((I=o.props.style)==null?void 0:I.height)||"40"),"px"]})]})]})});case"social":return o.props.socialLinks?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alignment"}),i.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[i.jsx("button",{className:`flex-1 py-2 ${((P=o.props.style)==null?void 0:P.justifyContent)==="flex-start"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>c("justifyContent","flex-start"),children:i.jsx("i",{className:"fas fa-align-left"})}),i.jsx("button",{className:`flex-1 py-2 ${((L=o.props.style)==null?void 0:L.justifyContent)==="center"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>c("justifyContent","center"),children:i.jsx("i",{className:"fas fa-align-center"})}),i.jsx("button",{className:`flex-1 py-2 ${((V=o.props.style)==null?void 0:V.justifyContent)==="flex-end"?"bg-[#EFD6FF]":"bg-white"}`,onClick:()=>c("justifyContent","flex-end"),children:i.jsx("i",{className:"fas fa-align-right"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Icon Size"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"20",max:"60",value:40,onChange:w=>{},className:"w-full mr-2"}),i.jsx("span",{className:"text-xs w-12 text-center",children:"40px"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Spacing"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"4",max:"32",value:parseInt(((F=o.props.style)==null?void 0:F.gap)||"16"),onChange:w=>c("gap",`${w.target.value}px`),className:"w-full mr-2"}),i.jsxs("span",{className:"text-xs w-12 text-center",children:[parseInt(((ee=o.props.style)==null?void 0:ee.gap)||"16"),"px"]})]})]})]}):i.jsx("p",{className:"text-gray-500",children:"No social links defined"});case"video":return i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Video URL"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:((S=o.props.attributes)==null?void 0:S.videoUrl)||"",onChange:w=>r(e,{attributes:{...o.props.attributes,videoUrl:w.target.value}})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: Videos are not supported in all email clients. A fallback link will be shown."})]})});default:return i.jsxs("p",{className:"text-gray-500",children:["Properties for ",o.type," components are not available yet."]})}};return i.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[l(),i.jsx("div",{className:"pt-2 border-t border-gray-200 mt-4",children:i.jsxs("button",{className:"w-full px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition",onClick:()=>s(e),children:[i.jsx("i",{className:"fas fa-trash mr-2"})," Delete Component"]})})]})},jr=()=>{const t=K(n=>n.template),e=K(n=>n.updateTemplateSettings),r=["Arial, sans-serif","Helvetica, Arial, sans-serif","Georgia, serif","Tahoma, Verdana, sans-serif","Trebuchet MS, sans-serif","Times New Roman, serif","Verdana, sans-serif","Courier New, monospace"];return i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-[#E61DAB] mb-4",children:"Template Settings"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Template Name"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:t.name,onChange:n=>{const s={...t,name:n.target.value};K.setState({template:s})}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Width (px)"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"range",min:"320",max:"800",step:"10",value:t.settings.width,onChange:n=>e({width:parseInt(n.target.value)}),className:"w-full mr-2"}),i.jsxs("span",{className:"text-sm font-mono w-14 text-center",children:[t.settings.width,"px"]})]}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"Mobile"}),i.jsx("span",{children:"Desktop"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Font Family"}),i.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#E61DAB] focus:border-transparent",value:t.settings.fontFamily,onChange:n=>e({fontFamily:n.target.value}),children:r.map(n=>i.jsx("option",{value:n,children:n},n))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Background Color"}),i.jsx("input",{type:"color",value:t.settings.backgroundColor,onChange:n=>e({backgroundColor:n.target.value}),className:"w-full h-10 p-1 border border-gray-300 rounded-md"})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsx("h4",{className:"text-sm font-medium mb-2",children:"Preview Options"}),i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("input",{type:"checkbox",id:"desktopPreview",checked:t.settings.showDesktopPreview,onChange:n=>e({showDesktopPreview:n.target.checked}),className:"mr-2 h-4 w-4 text-[#E61DAB] focus:ring-[#E61DAB] rounded"}),i.jsx("label",{htmlFor:"desktopPreview",className:"text-sm",children:"Show Desktop Preview"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"mobilePreview",checked:t.settings.showMobilePreview,onChange:n=>e({showMobilePreview:n.target.checked}),className:"mr-2 h-4 w-4 text-[#E61DAB] focus:ring-[#E61DAB] rounded"}),i.jsx("label",{htmlFor:"mobilePreview",className:"text-sm",children:"Show Mobile Preview"})]})]})]})]})})})};var Nr={},wt={exports:{}},Ke={exports:{}},G={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r;function Ro(){if(_r)return G;_r=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,n=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,g=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,O=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,D=t?Symbol.for("react.scope"):60119;function k(b){if(typeof b=="object"&&b!==null){var B=b.$$typeof;switch(B){case e:switch(b=b.type,b){case d:case u:case n:case o:case s:case g:return b;default:switch(b=b&&b.$$typeof,b){case l:case f:case x:case p:case c:return b;default:return B}}case r:return B}}}function H(b){return k(b)===u}return G.AsyncMode=d,G.ConcurrentMode=u,G.ContextConsumer=l,G.ContextProvider=c,G.Element=e,G.ForwardRef=f,G.Fragment=n,G.Lazy=x,G.Memo=p,G.Portal=r,G.Profiler=o,G.StrictMode=s,G.Suspense=g,G.isAsyncMode=function(b){return H(b)||k(b)===d},G.isConcurrentMode=H,G.isContextConsumer=function(b){return k(b)===l},G.isContextProvider=function(b){return k(b)===c},G.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},G.isForwardRef=function(b){return k(b)===f},G.isFragment=function(b){return k(b)===n},G.isLazy=function(b){return k(b)===x},G.isMemo=function(b){return k(b)===p},G.isPortal=function(b){return k(b)===r},G.isProfiler=function(b){return k(b)===o},G.isStrictMode=function(b){return k(b)===s},G.isSuspense=function(b){return k(b)===g},G.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===u||b===o||b===s||b===g||b===h||typeof b=="object"&&b!==null&&(b.$$typeof===x||b.$$typeof===p||b.$$typeof===c||b.$$typeof===l||b.$$typeof===f||b.$$typeof===O||b.$$typeof===C||b.$$typeof===D||b.$$typeof===v)},G.typeOf=k,G}var q={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir;function Ao(){return Ir||(Ir=1,process.env.NODE_ENV!=="production"&&function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,n=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,g=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,x=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,O=t?Symbol.for("react.fundamental"):60117,C=t?Symbol.for("react.responder"):60118,D=t?Symbol.for("react.scope"):60119;function k(S){return typeof S=="string"||typeof S=="function"||S===n||S===u||S===o||S===s||S===g||S===h||typeof S=="object"&&S!==null&&(S.$$typeof===x||S.$$typeof===p||S.$$typeof===c||S.$$typeof===l||S.$$typeof===f||S.$$typeof===O||S.$$typeof===C||S.$$typeof===D||S.$$typeof===v)}function H(S){if(typeof S=="object"&&S!==null){var w=S.$$typeof;switch(w){case e:var ge=S.type;switch(ge){case d:case u:case n:case o:case s:case g:return ge;default:var De=ge&&ge.$$typeof;switch(De){case l:case f:case x:case p:case c:return De;default:return w}}case r:return w}}}var b=d,B=u,Y=l,ne=c,ve=e,Te=f,xe=n,Se=x,te=p,re=r,pe=o,se=s,le=g,ye=!1;function Ee(S){return ye||(ye=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),y(S)||H(S)===d}function y(S){return H(S)===u}function T(S){return H(S)===l}function M(S){return H(S)===c}function A(S){return typeof S=="object"&&S!==null&&S.$$typeof===e}function _(S){return H(S)===f}function U(S){return H(S)===n}function I(S){return H(S)===x}function P(S){return H(S)===p}function L(S){return H(S)===r}function V(S){return H(S)===o}function F(S){return H(S)===s}function ee(S){return H(S)===g}q.AsyncMode=b,q.ConcurrentMode=B,q.ContextConsumer=Y,q.ContextProvider=ne,q.Element=ve,q.ForwardRef=Te,q.Fragment=xe,q.Lazy=Se,q.Memo=te,q.Portal=re,q.Profiler=pe,q.StrictMode=se,q.Suspense=le,q.isAsyncMode=Ee,q.isConcurrentMode=y,q.isContextConsumer=T,q.isContextProvider=M,q.isElement=A,q.isForwardRef=_,q.isFragment=U,q.isLazy=I,q.isMemo=P,q.isPortal=L,q.isProfiler=V,q.isStrictMode=F,q.isSuspense=ee,q.isValidElementType=k,q.typeOf=H}()),q}var Pr;function Rr(){return Pr||(Pr=1,process.env.NODE_ENV==="production"?Ke.exports=Ro():Ke.exports=Ao()),Ke.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ct,Ar;function ko(){if(Ar)return Ct;Ar=1;var t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(o){if(o==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(o)}function s(){try{if(!Object.assign)return!1;var o=new String("abc");if(o[5]="de",Object.getOwnPropertyNames(o)[0]==="5")return!1;for(var c={},l=0;l<10;l++)c["_"+String.fromCharCode(l)]=l;var d=Object.getOwnPropertyNames(c).map(function(f){return c[f]});if(d.join("")!=="0123456789")return!1;var u={};return"abcdefghijklmnopqrst".split("").forEach(function(f){u[f]=f}),Object.keys(Object.assign({},u)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ct=s()?Object.assign:function(o,c){for(var l,d=n(o),u,f=1;f<arguments.length;f++){l=Object(arguments[f]);for(var g in l)e.call(l,g)&&(d[g]=l[g]);if(t){u=t(l);for(var h=0;h<u.length;h++)r.call(l,u[h])&&(d[u[h]]=l[u[h]])}}return d},Ct}var Dt,kr;function jt(){if(kr)return Dt;kr=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dt=t,Dt}var Nt,Mr;function Lr(){return Mr||(Mr=1,Nt=Function.call.bind(Object.prototype.hasOwnProperty)),Nt}var _t,Fr;function Mo(){if(Fr)return _t;Fr=1;var t=function(){};if(process.env.NODE_ENV!=="production"){var e=jt(),r={},n=Lr();t=function(o){var c="Warning: "+o;typeof console<"u"&&console.error(c);try{throw new Error(c)}catch{}}}function s(o,c,l,d,u){if(process.env.NODE_ENV!=="production"){for(var f in o)if(n(o,f)){var g;try{if(typeof o[f]!="function"){var h=Error((d||"React class")+": "+l+" type `"+f+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof o[f]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw h.name="Invariant Violation",h}g=o[f](c,f,d,l,null,e)}catch(x){g=x}if(g&&!(g instanceof Error)&&t((d||"React class")+": type specification of "+l+" `"+f+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof g+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),g instanceof Error&&!(g.message in r)){r[g.message]=!0;var p=u?u():"";t("Failed "+l+" type: "+g.message+(p??""))}}}}return s.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(r={})},_t=s,_t}var It,Hr;function Lo(){if(Hr)return It;Hr=1;var t=Rr(),e=ko(),r=jt(),n=Lr(),s=Mo(),o=function(){};process.env.NODE_ENV!=="production"&&(o=function(l){var d="Warning: "+l;typeof console<"u"&&console.error(d);try{throw new Error(d)}catch{}});function c(){return null}return It=function(l,d){var u=typeof Symbol=="function"&&Symbol.iterator,f="@@iterator";function g(y){var T=y&&(u&&y[u]||y[f]);if(typeof T=="function")return T}var h="<<anonymous>>",p={array:C("array"),bigint:C("bigint"),bool:C("boolean"),func:C("function"),number:C("number"),object:C("object"),string:C("string"),symbol:C("symbol"),any:D(),arrayOf:k,element:H(),elementType:b(),instanceOf:B,node:Te(),objectOf:ne,oneOf:Y,oneOfType:ve,shape:Se,exact:te};function x(y,T){return y===T?y!==0||1/y===1/T:y!==y&&T!==T}function v(y,T){this.message=y,this.data=T&&typeof T=="object"?T:{},this.stack=""}v.prototype=Error.prototype;function O(y){if(process.env.NODE_ENV!=="production")var T={},M=0;function A(U,I,P,L,V,F,ee){if(L=L||h,F=F||P,ee!==r){if(d){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var w=L+":"+P;!T[w]&&M<3&&(o("You are manually calling a React.PropTypes validation function for the `"+F+"` prop on `"+L+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),T[w]=!0,M++)}}return I[P]==null?U?I[P]===null?new v("The "+V+" `"+F+"` is marked as required "+("in `"+L+"`, but its value is `null`.")):new v("The "+V+" `"+F+"` is marked as required in "+("`"+L+"`, but its value is `undefined`.")):null:y(I,P,L,V,F)}var _=A.bind(null,!1);return _.isRequired=A.bind(null,!0),_}function C(y){function T(M,A,_,U,I,P){var L=M[A],V=se(L);if(V!==y){var F=le(L);return new v("Invalid "+U+" `"+I+"` of type "+("`"+F+"` supplied to `"+_+"`, expected ")+("`"+y+"`."),{expectedType:y})}return null}return O(T)}function D(){return O(c)}function k(y){function T(M,A,_,U,I){if(typeof y!="function")return new v("Property `"+I+"` of component `"+_+"` has invalid PropType notation inside arrayOf.");var P=M[A];if(!Array.isArray(P)){var L=se(P);return new v("Invalid "+U+" `"+I+"` of type "+("`"+L+"` supplied to `"+_+"`, expected an array."))}for(var V=0;V<P.length;V++){var F=y(P,V,_,U,I+"["+V+"]",r);if(F instanceof Error)return F}return null}return O(T)}function H(){function y(T,M,A,_,U){var I=T[M];if(!l(I)){var P=se(I);return new v("Invalid "+_+" `"+U+"` of type "+("`"+P+"` supplied to `"+A+"`, expected a single ReactElement."))}return null}return O(y)}function b(){function y(T,M,A,_,U){var I=T[M];if(!t.isValidElementType(I)){var P=se(I);return new v("Invalid "+_+" `"+U+"` of type "+("`"+P+"` supplied to `"+A+"`, expected a single ReactElement type."))}return null}return O(y)}function B(y){function T(M,A,_,U,I){if(!(M[A]instanceof y)){var P=y.name||h,L=Ee(M[A]);return new v("Invalid "+U+" `"+I+"` of type "+("`"+L+"` supplied to `"+_+"`, expected ")+("instance of `"+P+"`."))}return null}return O(T)}function Y(y){if(!Array.isArray(y))return process.env.NODE_ENV!=="production"&&(arguments.length>1?o("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):o("Invalid argument supplied to oneOf, expected an array.")),c;function T(M,A,_,U,I){for(var P=M[A],L=0;L<y.length;L++)if(x(P,y[L]))return null;var V=JSON.stringify(y,function(ee,S){var w=le(S);return w==="symbol"?String(S):S});return new v("Invalid "+U+" `"+I+"` of value `"+String(P)+"` "+("supplied to `"+_+"`, expected one of "+V+"."))}return O(T)}function ne(y){function T(M,A,_,U,I){if(typeof y!="function")return new v("Property `"+I+"` of component `"+_+"` has invalid PropType notation inside objectOf.");var P=M[A],L=se(P);if(L!=="object")return new v("Invalid "+U+" `"+I+"` of type "+("`"+L+"` supplied to `"+_+"`, expected an object."));for(var V in P)if(n(P,V)){var F=y(P,V,_,U,I+"."+V,r);if(F instanceof Error)return F}return null}return O(T)}function ve(y){if(!Array.isArray(y))return process.env.NODE_ENV!=="production"&&o("Invalid argument supplied to oneOfType, expected an instance of array."),c;for(var T=0;T<y.length;T++){var M=y[T];if(typeof M!="function")return o("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ye(M)+" at index "+T+"."),c}function A(_,U,I,P,L){for(var V=[],F=0;F<y.length;F++){var ee=y[F],S=ee(_,U,I,P,L,r);if(S==null)return null;S.data&&n(S.data,"expectedType")&&V.push(S.data.expectedType)}var w=V.length>0?", expected one of type ["+V.join(", ")+"]":"";return new v("Invalid "+P+" `"+L+"` supplied to "+("`"+I+"`"+w+"."))}return O(A)}function Te(){function y(T,M,A,_,U){return re(T[M])?null:new v("Invalid "+_+" `"+U+"` supplied to "+("`"+A+"`, expected a ReactNode."))}return O(y)}function xe(y,T,M,A,_){return new v((y||"React class")+": "+T+" type `"+M+"."+A+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+_+"`.")}function Se(y){function T(M,A,_,U,I){var P=M[A],L=se(P);if(L!=="object")return new v("Invalid "+U+" `"+I+"` of type `"+L+"` "+("supplied to `"+_+"`, expected `object`."));for(var V in y){var F=y[V];if(typeof F!="function")return xe(_,U,I,V,le(F));var ee=F(P,V,_,U,I+"."+V,r);if(ee)return ee}return null}return O(T)}function te(y){function T(M,A,_,U,I){var P=M[A],L=se(P);if(L!=="object")return new v("Invalid "+U+" `"+I+"` of type `"+L+"` "+("supplied to `"+_+"`, expected `object`."));var V=e({},M[A],y);for(var F in V){var ee=y[F];if(n(y,F)&&typeof ee!="function")return xe(_,U,I,F,le(ee));if(!ee)return new v("Invalid "+U+" `"+I+"` key `"+F+"` supplied to `"+_+"`.\nBad object: "+JSON.stringify(M[A],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(y),null,"  "));var S=ee(P,F,_,U,I+"."+F,r);if(S)return S}return null}return O(T)}function re(y){switch(typeof y){case"number":case"string":case"undefined":return!0;case"boolean":return!y;case"object":if(Array.isArray(y))return y.every(re);if(y===null||l(y))return!0;var T=g(y);if(T){var M=T.call(y),A;if(T!==y.entries){for(;!(A=M.next()).done;)if(!re(A.value))return!1}else for(;!(A=M.next()).done;){var _=A.value;if(_&&!re(_[1]))return!1}}else return!1;return!0;default:return!1}}function pe(y,T){return y==="symbol"?!0:T?T["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&T instanceof Symbol:!1}function se(y){var T=typeof y;return Array.isArray(y)?"array":y instanceof RegExp?"object":pe(T,y)?"symbol":T}function le(y){if(typeof y>"u"||y===null)return""+y;var T=se(y);if(T==="object"){if(y instanceof Date)return"date";if(y instanceof RegExp)return"regexp"}return T}function ye(y){var T=le(y);switch(T){case"array":case"object":return"an "+T;case"boolean":case"date":case"regexp":return"a "+T;default:return T}}function Ee(y){return!y.constructor||!y.constructor.name?h:y.constructor.name}return p.checkPropTypes=s,p.resetWarningCache=s.resetWarningCache,p.PropTypes=p,p},It}var Pt,Br;function Fo(){if(Br)return Pt;Br=1;var t=jt();function e(){}function r(){}return r.resetWarningCache=e,Pt=function(){function n(c,l,d,u,f,g){if(g!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return o.PropTypes=o,o},Pt}if(process.env.NODE_ENV!=="production"){var Ho=Rr(),Bo=!0;wt.exports=Lo()(Ho.isElement,Bo)}else wt.exports=Fo()();var Uo=wt.exports,Vo=ae&&ae.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xe=ae&&ae.__assign||function(){return Xe=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Xe.apply(this,arguments)},$o=ae&&ae.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wo=ae&&ae.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ur=ae&&ae.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$o(e,t,r);return Wo(e,t),e},Yo=ae&&ae.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},zo=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nr,"__esModule",{value:!0});var Rt=Ur(j),Go=zo(Sr),be=Ur(Uo);function Vr(t){return t&&t.replace(/&nbsp;|\u202F|\u00A0/g," ").replace(/<br \/>/g,"<br>")}function qo(t){var e=document.createTextNode("");t.appendChild(e);var r=document.activeElement===t;if(e!==null&&e.nodeValue!==null&&r){var n=window.getSelection();if(n!==null){var s=document.createRange();s.setStart(e,e.nodeValue.length),s.collapse(!0),n.removeAllRanges(),n.addRange(s)}t instanceof HTMLElement&&t.focus()}}var Ko=function(t){Vo(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.lastHtml=r.props.html,r.el=typeof r.props.innerRef=="function"?{current:null}:Rt.createRef(),r.getEl=function(){return(r.props.innerRef&&typeof r.props.innerRef!="function"?r.props.innerRef:r.el).current},r.emitChange=function(n){var s=r.getEl();if(s){var o=s.innerHTML;if(r.props.onChange&&o!==r.lastHtml){var c=Object.assign({},n,{target:{value:o}});r.props.onChange(c)}r.lastHtml=o}},r}return e.prototype.render=function(){var r=this,n=this.props,s=n.tagName,o=n.html,c=n.innerRef,l=Yo(n,["tagName","html","innerRef"]);return Rt.createElement(s||"div",Xe(Xe({},l),{ref:typeof c=="function"?function(d){c(d),r.el.current=d}:c||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:o}}),this.props.children)},e.prototype.shouldComponentUpdate=function(r){var n=this.props,s=this.getEl();return!s||Vr(r.html)!==Vr(s.innerHTML)?!0:n.disabled!==r.disabled||n.tagName!==r.tagName||n.className!==r.className||n.innerRef!==r.innerRef||n.placeholder!==r.placeholder||!(0,Go.default)(n.style,r.style)},e.prototype.componentDidUpdate=function(){var r=this.getEl();r&&(this.props.html!==r.innerHTML&&(r.innerHTML=this.props.html),this.lastHtml=this.props.html,qo(r))},e.propTypes={html:be.string.isRequired,onChange:be.func,disabled:be.bool,tagName:be.string,className:be.string,style:be.object,innerRef:be.oneOfType([be.object,be.func])},e}(Rt.Component),At=Nr.default=Ko;const $r=({component:t,isSelected:e})=>{const r=K(u=>u.selectComponent),n=K(u=>u.updateComponentContent),s=K(u=>u.removeComponent),o=u=>{u.stopPropagation(),r(t.id)},c=u=>{u.stopPropagation(),s(t.id)},l=u=>{n(t.id,u.target.value)},d=()=>{var u,f,g,h;switch(t.type){case"heading":return i.jsx(At,{html:t.content,onChange:l,tagName:t.props.tagName||"h2",style:t.props.style,className:"outline-none w-full"});case"text":return i.jsx(At,{html:t.content,onChange:l,tagName:t.props.tagName||"p",style:t.props.style,className:"outline-none w-full"});case"image":return i.jsx("img",{src:((u=t.props.attributes)==null?void 0:u.src)||"",alt:((f=t.props.attributes)==null?void 0:f.alt)||"",style:t.props.style});case"button":return i.jsx("div",{style:{textAlign:"center"},children:i.jsx(At,{html:t.content,onChange:l,tagName:"div",style:t.props.style,className:"outline-none inline-block"})});case"divider":return i.jsx("hr",{style:t.props.style});case"spacer":return i.jsx("div",{style:t.props.style,children:""});case"social":return i.jsx("div",{style:t.props.style,className:"flex justify-center",children:(g=t.props.socialLinks)==null?void 0:g.map((p,x)=>i.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",width:"40px",height:"40px",borderRadius:"50%",backgroundColor:p.color,color:"white",textAlign:"center",lineHeight:"40px",margin:"0 8px"},children:i.jsx("i",{className:p.icon})},x))});case"video":return i.jsx("div",{style:t.props.style,children:i.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:i.jsxs("p",{style:{textAlign:"center",color:"#666",paddingTop:"20px"},children:["Video placeholder (URL: ",(h=t.props.attributes)==null?void 0:h.videoUrl,")"]})})});case"section":case"columns":return null;default:return i.jsxs("div",{children:["Unknown component: ",t.type]})}};return i.jsxs("div",{className:`template-component ${e?"selected":""}`,onClick:o,children:[d(),i.jsx("div",{className:"component-actions",children:i.jsx("button",{className:"action-button",onClick:c,title:"Delete",children:i.jsx("i",{className:"fas fa-trash"})})})]})},Wr=()=>{const t=K(l=>l.template),e=K(l=>l.selectedComponentId),r=K(l=>l.addComponent),n=K(l=>l.selectComponent),[{isOver:s},o]=Po(()=>({accept:"COMPONENT",drop:l=>{r(l.componentType)},collect:l=>({isOver:!!l.isOver()})})),c=()=>{n(null)};return i.jsx("div",{className:"w-full lg:w-2/3 bg-gray-50 overflow-auto p-4",onClick:c,children:i.jsx("div",{ref:o,className:`bg-white mx-auto max-w-3xl shadow-sm rounded-md border border-gray-200 min-h-[600px] relative ${s?"bg-[#EFD6FF] border-[#8E33FF]":""}`,style:{width:`${t.settings.width}px`,maxWidth:"100%"},children:i.jsx("div",{className:"p-6 flex flex-col gap-2",children:t.components.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-600 border-2 border-dashed border-[#DB7BD0] rounded-md",children:[i.jsx("i",{className:"fas fa-arrow-right text-[#E61DAB] text-3xl mb-2"}),i.jsx("p",{className:"text-lg",children:"Drag components from the right panel"}),i.jsx("p",{className:"text-sm",children:"or"}),i.jsxs("button",{className:"mt-2 px-4 py-2 bg-gradient-to-r from-[#E61DAB] to-[#8E33FF] text-white hover:from-[#F1136C] hover:to-[#5119B7] rounded transition",children:[i.jsx("i",{className:"fas fa-upload mr-2"})," Import Template"]})]}):t.components.map(l=>i.jsx($r,{component:l,isSelected:l.id===e},l.id))})})})},Je=t=>{var r,n,s,o;let e="";switch(t.type){case"heading":const c=t.props.tagName||"h2",l=fe(t.props.style||{});e=`<${c} style="${l}">${t.content}</${c}>`;break;case"text":const d=t.props.tagName||"p",u=fe(t.props.style||{});e=`<${d} style="${u}">${t.content}</${d}>`;break;case"image":const f=fe(t.props.style||{}),g=((r=t.props.attributes)==null?void 0:r.src)||"",h=((n=t.props.attributes)==null?void 0:n.alt)||"";e=`<img src="${g}" alt="${h}" style="${f}" />`;break;case"button":const p=t.props.tagName||"a",x=fe(t.props.style||{}),v=((s=t.props.attributes)==null?void 0:s.href)||"#";e=`<${p} href="${v}" style="${x}">${t.content}</${p}>`;break;case"divider":e=`<hr style="${fe(t.props.style||{})}" />`;break;case"spacer":e=`<div style="${fe(t.props.style||{})}">&nbsp;</div>`;break;case"social":if(e=`<div style="${fe(t.props.style||{})}">`,t.props.socialLinks&&Array.isArray(t.props.socialLinks))for(const Y of t.props.socialLinks)e+=`
            <a href="${Y.url}" style="display: inline-block; width: 40px; height: 40px; border-radius: 50%; background-color: ${Y.color}; color: white; text-align: center; line-height: 40px; margin: 0 8px; text-decoration: none;" target="_blank">
              <i class="${Y.icon}"></i>
            </a>
          `;e+="</div>";break;case"section":if(e=`<div style="${fe(t.props.style||{})}">`,t.props.children&&Array.isArray(t.props.children))for(const Y of t.props.children)e+=Je(Y);e+="</div>";break;case"columns":if(e=`<div style="${fe(t.props.style||{})}">`,t.props.children&&Array.isArray(t.props.children))for(const Y of t.props.children){const ne=fe({...Y.props.style||{},width:"100%"});if(e+=`<div style="${ne}">`,Y.props.children&&Array.isArray(Y.props.children))for(const ve of Y.props.children)e+=Je(ve);e+="</div>"}e+="</div>";break;case"video":const b=fe(t.props.style||{}),B=((o=t.props.attributes)==null?void 0:o.videoUrl)||"";e=`
        <div style="${b}">
          <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
            <p style="text-align: center; color: #666; padding-top: 20px;">
              Video placeholder (not supported in all email clients)
            </p>
            <p style="text-align: center; padding-top: 10px;">
              <a href="${B}" style="color: #3182ce; text-decoration: underline;" target="_blank">
                Watch Video
              </a>
            </p>
          </div>
        </div>
      `;break;default:e=`<!-- Unsupported component type: ${t.type} -->`}return e},fe=t=>Object.entries(t).map(([e,r])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${r}`).join("; "),kt=t=>{const{components:e,settings:r}=t;let n="";for(const s of e)n+=Je(s);return`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Template</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body style="margin: 0; padding: 0; background-color: ${r.backgroundColor}; font-family: ${r.fontFamily};">
  <table cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
      <td align="center" valign="top">
        <table cellpadding="0" cellspacing="0" border="0" width="${r.width}" style="max-width: ${r.width}px; margin: 0 auto;">
          <tr>
            <td>
              ${n}
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`},me={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};function Xo(){return oe()}const Pe=new Map,Ze=[];let Qe={toasts:[]};function Ce(t){Qe=Jo(Qe,t),Ze.forEach(e=>{e(Qe)})}function Jo(t,e){switch(e.type){case me.ADD_TOAST:return{...t,toasts:[...t.toasts,e.toast]};case me.UPDATE_TOAST:return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case me.DISMISS_TOAST:{const{toastId:r}=e;return r===void 0?{...t,toasts:t.toasts.map(n=>({...n,dismissed:!0}))}:{...t,toasts:t.toasts.map(n=>n.id===r?{...n,dismissed:!0}:n)}}case me.REMOVE_TOAST:{const{toastId:r}=e;return r===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==r)}}}}function Zo({...t}){const e=Xo(),r=o=>Ce({type:me.UPDATE_TOAST,toast:{...o,id:e}}),n=()=>Ce({type:me.DISMISS_TOAST,toastId:e});Ce({type:me.ADD_TOAST,toast:{...t,id:e,title:t.title,description:t.description,type:t.type||"default"}});const s=setTimeout(()=>{Ce({type:me.DISMISS_TOAST,toastId:e}),setTimeout(()=>{Ce({type:me.REMOVE_TOAST,toastId:e})},300)},5e3);return Pe.set(e,s),{id:e,update:r,dismiss:n}}function Qo(){const[t,e]=j.useState(Qe);j.useEffect(()=>(Ze.push(e),()=>{const s=Ze.indexOf(e);s>-1&&Ze.splice(s,1)}),[t]);const r=j.useCallback(s=>{Ce({type:me.DISMISS_TOAST,toastId:s}),s&&Pe.has(s)&&(clearTimeout(Pe.get(s)),Pe.delete(s))},[]),n=j.useCallback(()=>{Ce({type:me.DISMISS_TOAST}),Pe.forEach(s=>clearTimeout(s)),Pe.clear()},[]);return{...t,toast:Zo,dismiss:r,dismissAll:n}}const Yr=()=>{const{toast:t}=Qo(),e=K(l=>l.isOutputModalOpen),r=K(l=>l.setOutputModalOpen),n=K(l=>l.template),s=kt(n),o=j.useRef(null),c=()=>{o.current&&navigator.clipboard.writeText(s).then(()=>{t({title:"Copied to clipboard",description:"HTML has been copied to your clipboard"})}).catch(l=>{t({type:"error",title:"Copy failed",description:"Failed to copy HTML to clipboard"}),console.error("Failed to copy text: ",l)})};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-bold text-[#E61DAB]",children:"Public Circles - Generated HTML"}),i.jsx("button",{className:"text-gray-400 hover:text-gray-600",onClick:()=>r(!1),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"p-4 overflow-auto flex-1",children:i.jsx("pre",{ref:o,className:"bg-[#EFD6FF] bg-opacity-20 p-4 rounded-md overflow-x-auto text-sm font-mono border border-[#C684FF]",children:s})}),i.jsx("div",{className:"p-4 border-t border-gray-200 flex justify-end",children:i.jsxs("button",{onClick:c,className:"px-4 py-2 bg-gradient-to-r from-[#E61DAB] to-[#8E33FF] text-white rounded-md hover:from-[#F1136C] hover:to-[#5119B7] transition-all flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-copy"}),"Copy to Clipboard"]})})]})}):null},zr=t=>{const e=t.replace(/\\n/g,`
`).replace(/\\"/g,'"');if(e.length>5e4||e.includes("BECHMARKONE")||e.includes("BMEMBF"))return console.log("Detected complex template - using simplified approach"),ei(e);const n=new DOMParser().parseFromString(e,"text/html"),s=n.body;if(!s)return console.error("Could not parse HTML: No body element found"),ci("Failed Import");const o={...Oe,backgroundColor:He(s,"background-color")||Oe.backgroundColor,fontFamily:He(s,"font-family")||Oe.fontFamily};let c=null;const l=s.querySelectorAll("table[name], table[class]");if(l.length>0)for(const u of l){const f=u.getAttribute("name")||"",g=u.getAttribute("class")||"";if(f.includes("Main")||f.includes("Content")||g.includes("main")||g.includes("content")||f.includes("email")||g.includes("email")){c=u;break}}if(!c){const u=s.querySelectorAll("table");if(u.length>0)for(const f of u){const g=f.textContent&&f.textContent.trim().length>50,h=f.querySelectorAll("img").length>0;(g||h)&&(!c||f.querySelectorAll("table").length>0)&&(c=f)}}if(!c){const u=s.querySelectorAll('div[class*="content"], div[id*="content"], div[class*="container"], div[id*="container"]');for(const f of u)if(f.textContent&&f.textContent.trim().length>100){c=f;break}}if(c||(c=s),c&&c.hasAttribute("width")){const u=c.getAttribute("width");u&&!isNaN(parseInt(u))&&(o.width=parseInt(u))}else if(c){const u=He(c,"width");if(u&&u.includes("px")){const f=parseInt(u.replace("px",""));isNaN(f)||(o.width=f)}}const d={id:oe(),name:n.title||"Imported Template",components:[],settings:o};try{Gr(c,d.components),d.components.length===0&&Gr(s,d.components),d.components.length===0&&(console.warn("Failed to extract components from template - using fallback"),d.components.push({id:oe(),type:"text",content:e,props:{tagName:"div",style:{padding:"10px"}}}))}catch(u){console.error("Error parsing template content:",u),d.components=[{id:oe(),type:"text",content:e,props:{tagName:"div",style:{padding:"10px"}}}]}return d};function ei(t){return{id:oe(),name:"Complex Email Template",components:[{id:oe(),type:"text",content:ti(t),props:{tagName:"div",style:{padding:"10px",width:"100%"}}}],settings:{...Oe,width:600}}}function ti(t){let e=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");return e=e.replace(/<!--\[if.*?<!\[endif\]-->/gs,""),e}const Gr=(t,e)=>{if(!t)return;const r=Array.from(t.children).filter(n=>!["style","script","meta","link","head"].includes(n.tagName.toLowerCase()));if(t.tagName.toLowerCase()==="table"){const n=t.querySelectorAll(":scope > tbody > tr, :scope > tr");if(n.length>0){n.forEach(s=>{const o=s.querySelectorAll("td, th");if(o.length===1){const c=Re(o[0]);c&&e.push(c)}else if(o.length>1){const c=ni(o);c&&e.push(c)}});return}}if(r.length===0){const n=Re(t);n&&e.push(n)}else if(ri(t)){const s=si(t,r);s&&e.push(s)}else r.forEach(s=>{const o=Re(s);o&&e.push(o)})},ri=t=>{var s,o;const e=t.tagName.toLowerCase(),r=((s=t.className)==null?void 0:s.toLowerCase())||"",n=((o=t.id)==null?void 0:o.toLowerCase())||"";return e==="div"&&(r.includes("section")||r.includes("container")||r.includes("wrapper")||n.includes("section")||n.includes("container"))||e==="section"||e==="table"&&t.querySelectorAll("table").length>0},ni=t=>{const e=[];return t.forEach(r=>{const n=Re(r);n&&e.push(n)}),e.length===0?null:{id:oe(),type:"columns",content:"",props:{tagName:"div",style:{display:"flex",flexDirection:"row",width:"100%"},children:e}}},si=(t,e)=>{const r=[];if(e.forEach(s=>{const o=Re(s);o&&r.push(o)}),r.length===0)return Re(t);const n=Mt(t);return{id:oe(),type:"section",content:"",props:{tagName:"div",style:n,children:r}}},Re=t=>{if(!t||!t.tagName)return null;const e=t.innerHTML||"",r=t.textContent||"";if(!e.trim()&&!r.trim())return null;const n=t.tagName.toLowerCase();let s=oi(t);const o=Mt(t),c={id:oe(),type:s,content:e,props:{tagName:n,style:o}};return ii(c,t,s),c},oi=t=>{var l,d;if(!t)return"text";const e=t.tagName.toLowerCase(),r=((l=t.className)==null?void 0:l.toLowerCase())||"",n=((d=t.id)==null?void 0:d.toLowerCase())||"",s=!!t.querySelector("img"),o=!!t.querySelector('a[href*="facebook"], a[href*="twitter"], a[href*="instagram"], a[href*="linkedin"]'),c=t.textContent||"";if(/^h[1-6]$/.test(e))return"heading";if(e==="img"||s){const u=e==="img"?t:t.querySelector("img");if(u){const f=u.getAttribute("width"),g=u.getAttribute("height"),h=f&&parseInt(f)<50||g&&parseInt(g)<50,p=!!u.closest("a");if(h&&p&&o)return"social"}return"image"}return e==="a"||r.includes("button")||n.includes("button")||t.querySelector("a")&&!s?"button":e==="hr"||r.includes("divider")||n.includes("divider")?"divider":e==="div"&&c.trim()===""||r.includes("spacer")||n.includes("spacer")?"spacer":e==="iframe"||t.querySelector("iframe")||r.includes("video")||n.includes("video")?"video":o?"social":e==="table"&&t.querySelectorAll("td").length>1?"columns":(e==="div"||e==="section")&&(r.includes("section")||n.includes("section")||r.includes("container")||n.includes("container"))?"section":e==="p"||e==="div"||e==="span"?"text":e==="table"||e==="tr"||e==="td"?"section":"text"},Mt=t=>{const e={};if(!t)return e;const r=t.getAttribute("style");r&&r.split(";").forEach(n=>{const s=n.split(":");if(s.length===2){const o=s[0].trim(),c=s[1].trim();if(o&&c){const l=o.replace(/-([a-z])/g,(d,u)=>u.toUpperCase());e[l]=c}}});try{const n=window.getComputedStyle(t);["color","background-color","font-size","font-weight","text-align","margin","padding","border","width","height"].forEach(o=>{const c=o.replace(/-([a-z])/g,(l,d)=>d.toUpperCase());if(!e[c]){const l=n.getPropertyValue(o);l&&l!==""&&l!=="normal"&&l!=="auto"&&(e[c]=l)}})}catch(n){console.warn("Error getting computed style:",n)}return e},ii=(t,e,r)=>{switch(t.props.style||(t.props.style={}),r){case"image":const n=e.tagName.toLowerCase()==="img"?e:e.querySelector("img");n&&(t.props.attributes={src:n.getAttribute("src")||"",alt:n.getAttribute("alt")||"",width:n.getAttribute("width")||"",height:n.getAttribute("height")||""},t.content="");break;case"button":const s=e.tagName.toLowerCase()==="a"?e:e.querySelector("a");if(s){t.props.attributes={href:s.getAttribute("href")||"#",target:s.getAttribute("target")||"_blank"},t.content=s.textContent||"Click Here";const d=Mt(s);Object.keys(d).length>0&&(t.props.style={...t.props.style,...d})}break;case"video":const o=e.tagName.toLowerCase()==="iframe"?e:e.querySelector("iframe");o&&(t.props.attributes={videoUrl:o.getAttribute("src")||"",width:o.getAttribute("width")||"100%",height:o.getAttribute("height")||"auto"},t.content="");break;case"social":const c=e.querySelectorAll('a[href*="facebook"], a[href*="twitter"], a[href*="instagram"], a[href*="linkedin"], a[href*="youtube"]');if(c.length>0){const d=[];c.forEach(u=>{const f=u.getAttribute("href")||"";let g="other";f.includes("facebook")?g="facebook":f.includes("twitter")?g="twitter":f.includes("instagram")?g="instagram":f.includes("linkedin")?g="linkedin":f.includes("youtube")&&(g="youtube"),d.push({platform:g,url:f})}),t.props.socialLinks=d}break;case"spacer":const l=t.props.style.height||He(e,"height")||He(e,"padding-top")||"20px";t.props.style.height=l,t.content="";break;case"divider":t.props.style={...t.props.style,borderTop:t.props.style.borderTop||"1px solid #ccc",margin:t.props.style.margin||"20px 0"},t.content="";break;case"heading":if(!t.props.style.fontSize){const d={h1:"32px",h2:"28px",h3:"24px",h4:"20px",h5:"18px",h6:"16px"},u=t.props.tagName||"h2";t.props.style.fontSize=d[u]||"24px"}t.props.style.fontWeight||(t.props.style.fontWeight="bold");break;case"text":t.content=ai(t.content);break}},ai=t=>t?t.replace(/<strong>(.*?)<\/strong>/g,'<span style="font-weight: bold;">$1</span>').replace(/<b>(.*?)<\/b>/g,'<span style="font-weight: bold;">$1</span>').replace(/<em>(.*?)<\/em>/g,'<span style="font-style: italic;">$1</span>').replace(/<i>(.*?)<\/i>/g,'<span style="font-style: italic;">$1</span>').replace(/<u>(.*?)<\/u>/g,'<span style="text-decoration: underline;">$1</span>').replace(/<s>(.*?)<\/s>/g,'<span style="text-decoration: line-through;">$1</span>').replace(/<del>(.*?)<\/del>/g,'<span style="text-decoration: line-through;">$1</span>').replace(/<mark>(.*?)<\/mark>/g,'<span style="background-color: yellow;">$1</span>'):"",He=(t,e)=>{if(!t)return null;const r=t.getAttribute("style");if(r){const n=new RegExp(`${e}:\\s*([^;]+)`,"i"),s=r.match(n);if(s&&s[1])return s[1].trim()}try{if(window.getComputedStyle){const s=window.getComputedStyle(t).getPropertyValue(e);if(s&&s!==""&&s!=="normal"&&s!=="auto")return s}}catch(n){console.warn("Error getting computed style:",n)}return null},ci=t=>({id:oe(),name:t,components:[{id:oe(),type:"text",content:"Failed to parse the HTML template. Please check the HTML code and try again.",props:{tagName:"p",style:{color:"red",padding:"20px",textAlign:"center"}}}],settings:Oe}),qr=({initialHtml:t,useEnhancedParser:e=!0,onExport:r,onTemplateChange:n})=>{const[s,o]=j.useState(!!t),{isComponentPanelOpen:c,isPropertiesPanelOpen:l,isSettingsPanelOpen:d,openComponentPanel:u,openPropertiesPanel:f,openSettingsPanel:g}=K();return j.useEffect(()=>{if(t){o(!0);try{console.log("Parsing HTML template, length:",t.length),t.length>1e5&&console.warn("Very large HTML template detected:",t.length,"characters");const h=zr(t);console.log("Successfully parsed template with components:",h.components.length),setTimeout(()=>{K.setState({template:h}),o(!1),n&&n(h)},100)}catch(h){console.error("Failed to parse HTML:",h),console.log("Attempting fallback parsing approach...");try{const p={id:oe(),name:"Imported Template",components:[{id:oe(),type:"text",content:t,props:{tagName:"div",style:{padding:"10px"}}}],settings:K.getState().template.settings};K.setState({template:p}),o(!1),n&&n(p),console.log("Used fallback parsing - template imported as single content block"),alert("The template was imported as a single content block due to its complexity. You can now edit it as needed.")}catch(p){console.error("Even fallback parsing failed:",p);const x=K.getState().template;K.getState().initializeTemplate(),o(!1),n&&n(x),alert("Could not parse the template. Please check the HTML format and try again.")}}}else{K.getState().initializeTemplate();const h=K.getState().template;o(!1),n&&n(h)}},[t,n]),j.useEffect(()=>{if(!r&&!n)return;const h=K.subscribe((p,x)=>{if(p.template!==x.template&&n&&n(p.template),p.isOutputModalOpen!==x.isOutputModalOpen&&!p.isOutputModalOpen&&r){const v=kt(p.template);r(v)}});return()=>{h()}},[r,n]),i.jsxs("div",{className:"flex flex-col h-screen",children:[i.jsx(Rn,{}),i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsx(Wr,{}),i.jsxs("div",{className:"w-full lg:w-1/3 border-l border-gray-200 flex flex-col bg-white",children:[i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("nav",{className:"flex",children:[i.jsx("button",{className:`px-4 py-3 text-sm font-medium ${c?"text-[#E61DAB] border-b-2 border-[#E61DAB]":"text-gray-600 hover:text-[#8E33FF]"}`,onClick:u,children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"fas fa-th-large text-xs"}),"Components"]})}),i.jsx("button",{className:`px-4 py-3 text-sm font-medium ${l?"text-[#E61DAB] border-b-2 border-[#E61DAB]":"text-gray-600 hover:text-[#8E33FF]"}`,onClick:f,children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"fas fa-sliders-h text-xs"}),"Properties"]})}),i.jsx("button",{className:`px-4 py-3 text-sm font-medium ${d?"text-[#E61DAB] border-b-2 border-[#E61DAB]":"text-gray-600 hover:text-[#8E33FF]"}`,onClick:g,children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"fas fa-cog text-xs"}),"Settings"]})})]})}),c&&i.jsx(Cr,{}),l&&i.jsx(Dr,{}),d&&i.jsx(jr,{})]})]}),i.jsx(Yr,{})]})};function Kr(t){let e=null;return()=>(e==null&&(e=t()),e)}function li(t,e){return t.filter(r=>r!==e)}function ui(t,e){const r=new Set,n=o=>r.add(o);t.forEach(n),e.forEach(n);const s=[];return r.forEach(o=>s.push(o)),s}class di{enter(e){const r=this.entered.length,n=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=ui(this.entered.filter(n),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=li(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class fi{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(n=>{const s=this.config.exposeProperties[n];s!=null&&(r[n]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Xr="__NATIVE_FILE__",Jr="__NATIVE_URL__",Zr="__NATIVE_TEXT__",Qr="__NATIVE_HTML__",en=Object.freeze(Object.defineProperty({__proto__:null,FILE:Xr,HTML:Qr,TEXT:Zr,URL:Jr},Symbol.toStringTag,{value:"Module"}));function Lt(t,e,r){const n=e.reduce((s,o)=>s||t.getData(o),"");return n??r}const Ft={[Xr]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Qr]:{exposeProperties:{html:(t,e)=>Lt(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Jr]:{exposeProperties:{urls:(t,e)=>Lt(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Zr]:{exposeProperties:{text:(t,e)=>Lt(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function pi(t,e){const r=Ft[t];if(!r)throw new Error(`native type ${t} has no configuration`);const n=new fi(r);return n.loadDataTransfer(e),n}function Ht(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Ft).filter(r=>{const n=Ft[r];return n!=null&&n.matchesTypes?n.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const gi=Kr(()=>/firefox/i.test(navigator.userAgent)),tn=Kr(()=>!!window.safari);class rn{interpolate(e){const{xs:r,ys:n,c1s:s,c2s:o,c3s:c}=this;let l=r.length-1;if(e===r[l])return n[l];let d=0,u=c.length-1,f;for(;d<=u;){f=Math.floor(.5*(d+u));const p=r[f];if(p<e)d=f+1;else if(p>e)u=f-1;else return n[f]}l=Math.max(0,u);const g=e-r[l],h=g*g;return n[l]+s[l]*g+o[l]*h+c[l]*g*h}constructor(e,r){const{length:n}=e,s=[];for(let p=0;p<n;p++)s.push(p);s.sort((p,x)=>e[p]<e[x]?-1:1);const o=[],c=[];let l,d;for(let p=0;p<n-1;p++)l=e[p+1]-e[p],d=r[p+1]-r[p],o.push(l),c.push(d/l);const u=[c[0]];for(let p=0;p<o.length-1;p++){const x=c[p],v=c[p+1];if(x*v<=0)u.push(0);else{l=o[p];const O=o[p+1],C=l+O;u.push(3*C/((C+O)/x+(C+l)/v))}}u.push(c[c.length-1]);const f=[],g=[];let h;for(let p=0;p<u.length-1;p++){h=c[p];const x=u[p],v=1/o[p],O=x+u[p+1]-h-h;f.push((h-x-O)*v),g.push(O*v*v)}this.xs=e,this.ys=r,this.c1s=u,this.c2s=f,this.c3s=g}}const hi=1;function nn(t){const e=t.nodeType===hi?t:t.parentElement;if(!e)return null;const{top:r,left:n}=e.getBoundingClientRect();return{x:n,y:r}}function et(t){return{x:t.clientX,y:t.clientY}}function mi(t){var e;return t.nodeName==="IMG"&&(gi()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function vi(t,e,r,n){let s=t?e.width:r,o=t?e.height:n;return tn()&&t&&(o/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:o}}function yi(t,e,r,n,s){const o=mi(e),l=nn(o?t:e),d={x:r.x-l.x,y:r.y-l.y},{offsetWidth:u,offsetHeight:f}=t,{anchorX:g,anchorY:h}=n,{dragPreviewWidth:p,dragPreviewHeight:x}=vi(o,e,u,f),v=()=>{let B=new rn([0,.5,1],[d.y,d.y/f*x,d.y+x-f]).interpolate(h);return tn()&&o&&(B+=(window.devicePixelRatio-1)*x),B},O=()=>new rn([0,.5,1],[d.x,d.x/u*p,d.x+p-u]).interpolate(g),{offsetX:C,offsetY:D}=s,k=C===0||C,H=D===0||D;return{x:k?C:O(),y:H?D:v()}}class bi{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function xi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable}))),n.forEach(function(s){xi(t,s,r[s])})}return t}class Si{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,n){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,n);const s=c=>this.handleDragStart(c,e),o=c=>this.handleSelectStart(c);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",s),r.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",s),r.removeEventListener("selectstart",o),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const n=c=>this.handleDragEnter(c,e),s=c=>this.handleDragOver(c,e),o=c=>this.handleDrop(c,e);return r.addEventListener("dragenter",n),r.addEventListener("dragover",s),r.addEventListener("drop",o),()=>{r.removeEventListener("dragenter",n),r.removeEventListener("dragover",s),r.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return sn({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return sn({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(en).some(r=>en[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=pi(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const o=this.sourceNodes.get(s);return o&&nn(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const c=et(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:c});const{dataTransfer:l}=s,d=Ht(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const f=this.monitor.getSourceId(),g=this.sourceNodes.get(f),h=this.sourcePreviewNodes.get(f)||g;if(h){const{anchorX:p,anchorY:x,offsetX:v,offsetY:O}=this.getCurrentSourcePreviewNodeOptions(),k=yi(g,h,c,{anchorX:p,anchorY:x},{offsetX:v,offsetY:O});l.setDragImage(h,k.x,k.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(l&&!l.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:l}=s,d=Ht(l);d&&this.beginDragNativeItem(d,l)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,o.length>0&&this.actions.hover(o,{clientOffset:et(s)}),o.some(l=>this.monitor.canDropOnTarget(l))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=et(s),this.scheduleHover(o),(o||[]).some(l=>this.monitor.canDropOnTarget(l))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;s.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Ht(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:et(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const o=s.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(s.preventDefault(),o.dragDrop()))},this.options=new bi(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new di(this.isNodeInDocument)}}const Ei=function(e,r,n){return new Si(e,r,n)},Ti=()=>i.jsx("div",{id:"toaster",className:"fixed bottom-4 right-4 z-50"}),Bt=({children:t,variant:e,...r})=>{const n="py-2 px-4 rounded",s=e==="outline"?`bg-white border border-gray-300 hover:bg-gray-100 text-gray-800 ${n}`:`bg-[#E61DAB] hover:bg-[#d31a9c] text-white ${n}`;return i.jsx("button",{...r,className:r.className||s,children:t})},Oi=t=>i.jsx("textarea",{...t,className:t.className||"w-full min-h-[200px] p-3 border border-gray-300 rounded font-mono text-sm"}),wi=({children:t,...e})=>i.jsx("div",{...e,className:e.className||"mx-auto max-w-4xl my-4 bg-white p-6 rounded-lg shadow-sm",children:t}),Ci=({children:t,...e})=>i.jsx("div",{...e,className:e.className||"mb-3",children:t}),Di=({children:t,...e})=>i.jsx("h2",{...e,className:e.className||"text-xl font-semibold",children:t}),ji=({children:t,...e})=>i.jsx("div",{...e,className:e.className||"",children:t});function Ni(){const[t,e]=j.useState(void 0),[r,n]=j.useState(!1),[s,o]=j.useState(""),c=()=>{if(s.trim())try{console.log("Processing template input, length:",s.length);try{const u=JSON.parse(s);if(u.body){console.log("Detected JSON with body property"),e(u.body),n(!1);return}else if(typeof u=="string"){console.log("Detected JSON string"),e(u),n(!1);return}else if(u.html||u.content){console.log("Detected JSON with html/content property"),e(u.html||u.content),n(!1);return}}catch{if(console.log("Not JSON, treating as raw HTML"),s.includes("<")&&s.includes(">")){e(s),n(!1),s.length>1e5&&(console.warn("Very large HTML template detected:",s.length,"chars"),alert("This is a very large template. It may take longer to process."));return}else throw new Error("Input does not appear to contain HTML tags")}}catch(u){console.error("Failed to parse input:",u),alert("Could not parse input. Make sure it contains valid HTML with proper tags.")}},l=()=>{e(void 0),n(!1),o("")},d=()=>{n(!r)};return i.jsx(eo,{backend:Ei,children:i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsxs("div",{className:"p-4 bg-white border-b flex justify-center space-x-4",children:[i.jsx(Bt,{onClick:d,className:"bg-[#E61DAB] hover:bg-[#d31a9c] text-white",children:r?"Hide HTML Input":"Enter HTML Template"}),i.jsx(Bt,{onClick:l,variant:"outline",children:"Reset Template"})]}),r&&i.jsxs(wi,{className:"mx-auto max-w-4xl my-4",children:[i.jsx(Ci,{children:i.jsx(Di,{children:"Enter HTML Template"})}),i.jsxs(ji,{children:[i.jsx(Oi,{value:s,onChange:u=>o(u.target.value),placeholder:"Paste HTML or JSON with HTML content here...",className:"min-h-[200px] font-mono text-sm"}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx(Bt,{onClick:c,className:"bg-[#E61DAB] hover:bg-[#d31a9c] text-white",children:"Load Template"})})]})]}),i.jsx("div",{className:r?"hidden":"",children:i.jsx(qr,{initialHtml:t})}),i.jsx(Ti,{})]})})}J.App=Ni,J.COMPONENT_ITEMS=ct,J.ComponentPanel=Cr,J.DEFAULT_TEMPLATE_SETTINGS=Oe,J.DroppableComponent=$r,J.EmailCanvas=Wr,J.EmailEditor=qr,J.HtmlOutputModal=Yr,J.PropertiesPanel=Dr,J.SettingsPanel=jr,J.generateComponentHtml=Je,J.generateStyleString=fe,J.generateTemplateHtml=kt,J.getComponentDefinitionByType=sr,J.getEmptyTemplate=lt,J.parseHtmlToTemplate=zr,J.useEditorStore=K,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=public-circles-email-builder.umd.js.map
